{"version":3,"sources":["pages/main/main.module.css","components/order-feed-common-history/order-feed-common-history.module.css","components/order-feed-icons/order-feed-icons.module.css","pages/profile-page/edit-profile.module.css","pages/profile-page/profile-orders.module.css","components/modal-overlay/modal-overlay.module.css","components/order-details/order-details.module.css","components/ingredient-details/ingredient-details.module.css","components/nav-item/nav-item.tsx","components/app-header/app-header.tsx","services/actionTypes/cart.ts","services/reducers/auth.ts","services/api.ts","services/actions/cart.ts","services/actionTypes/wsActionTypes.ts","services/actions/wsActions.ts","utils/hooks.ts","utils/constants.ts","components/ingredients-item/ingredients-item.tsx","components/burger-ingredients/burger-ingredients.tsx","images/Subtract.svg","services/actionTypes/modal.ts","services/actions/modal.ts","components/constructor-item/constructor-item.tsx","services/useInit.ts","components/burger-constructor/burger-constructor.tsx","components/loader/loader.tsx","pages/main/main.tsx","components/order-feed-icon-image/order-feed-icon-image.tsx","components/order-feed-icons/order-feed-icons.tsx","utils/utils.ts","components/order-status/order-status.tsx","components/order-feed-common-history-item/order-feed-common-history-item.tsx","components/order-feed-common-history/order-feed-common-history.tsx","components/order-feed-cooking-numbers/order-feed-cooking-numbers.tsx","pages/order-feed-page/order-feed-page.tsx","components/order-ingredients-details-item/order-ingredients-details-item.tsx","pages/not-found-404/not-found-404.tsx","components/order-ingredients-details/order-ingredients-details.tsx","pages/protected-from-authenticated/protected-from-authenticated.tsx","pages/login-page/login-page.tsx","pages/register-page/register-page.tsx","pages/forgot-password-page/forgot-password-page.tsx","pages/reset-password-page/reset-password-page.tsx","pages/protected-route/protected-route.tsx","pages/profile-page/edit-profile.tsx","pages/profile-page/profile-orders.tsx","pages/profile-page/profile-page.tsx","pages/logout/logout.tsx","components/ingredient-details/ingredient-details.tsx","components/modal-overlay/modal-overlay.tsx","components/modal/modal.tsx","images/done.gif","components/order-details/order-details.tsx","components/routes/routes.tsx","components/app/app.tsx","services/reducers/cart.ts","services/reducers/modal.ts","services/reducers/webSocketReducer.ts","services/reducers/index.ts","services/reducers/store.ts","services/middleware/socketMiddleware.ts","index.tsx","components/order-ingredients-details/order-ingredients-details.module.css","components/order-feed-common-history-item/order-feed-common-history-item.module.css","pages/profile-page/profile-page.module.css","components/order-feed-cooking-numbers/order-feed-cooking-numbers.module.css","components/burger-constructor/burger-constructor.module.css","components/app-header/app-header.module.css","components/burger-ingredients/burger-ingredients.module.css","components/modal/modal.module.css","components/order-feed-icon-image/order-feed-icon-image.module.css","components/nav-item/nav-item.module.css","components/ingredients-item/ingredients-item.module.css","components/loader/loader.module.css","pages/order-feed-page/order-feed-page.module.css","components/order-ingredients-details-item/order-ingredients-details-item.module.css","components/constructor-item/constructor-item.module.css","components/order-status/order-status.module.css","pages/not-found-404/not-found-404.module.css"],"names":["module","exports","NavItem","props","to","path","exact","isExact","className","styles","item","activeClassName","activeNav","icon","children","text","AppHeader","wrapper","header","nav","list","type","logo","GET_INGREDIENTS_REQUEST","GET_INGREDIENTS_SUCCESS","GET_INGREDIENTS_ERROR","POST_ORDER_REQUEST","POST_ORDER_SUCCESS","POST_ORDER_ERROR","SET_ORDER","ADD_CONTAINER_ITEM","SET_CONTAINER_BUN","REMOVE_CONTAINER_ITEM","REPLACE_CART_INGREDIENTS","MOVE_CART_ITEM_TO_INDEX","SET_CART_STATE_TO_INITIAL","CLEAR_CART","CLEAR_ORDER","authSlice","createSlice","name","initialState","isAuth","user","email","register","request","success","error","login","reducers","registerSuccess","state","action","data","payload","registerRequest","registerError","logout","loginSuccess","loginRequest","loginError","setAuthFalse","setAuthTrue","setUserName","setUserEmail","actions","requestData","method","url","requestAction","successAction","errorAction","body","setCookie","dispatch","a","Authorization","Cookies","get","fetch","mode","cache","credentials","headers","redirect","referrerPolicy","JSON","stringify","response","json","ok","set","accessToken","refreshToken","getUserRequest","getNewAccessTokenRequest","token","getNewAccessToken","checkAccessToken","isSucceed","getUser","logoutUser","resetPasswordRequest","forgotPasswordRequest","getIngredientsRequest","getIngredientsSuccess","ingredients","getIngredientsError","postOrderRequest","postOrderSuccess","cartIDs","postOrderError","WS_CONNECTION_START","WS_CONNECTION_SUCCESS","WS_CONNECTION_ERROR","WS_GET_MESSAGE","WS_CONNECTION_CLOSED","WS_SEND_MESSAGE","WS_CLOSE_CONNECTION","wsConnectionStart","createAction","wsConnectionSuccess","wsConnectionError","wsGetMessage","wsConnectionClosed","wsCloseConnection","useSelector","selectorHook","useDispatch","dispatchHook","useWSConnect","useEffect","store","ws","messages","useGetIngredients","cart","ingredientsData","baseUrl","wsAllOrdersUrl","FILLINGS","SAUCES","BUNS","heightFromTopPageToRelativeBlock","checkAccessEndpoint","getUserdataEndpoint","IngredientsItem","itemData","location","useLocation","useState","counter","setCounter","constructorData","newCount","filter","_id","length","useDrag","subtype","id","collect","monitor","isDrag","isDragging","dragRef","border","ingredientId","pathname","background","style","ref","link","src","image","alt","width","height","priceWrap","price","count","size","BurgerIngredients","currentTab","setCurrentTab","sectionRef","useRef","bunRef","sauceRef","mainRef","scrollToRef","current","scrollTo","offsetTop","section","tab","value","active","onClick","ingredientType","menu","onScroll","e","distanceFromSauceBlockToRelative","getBoundingClientRect","top","grid","map","SET_MODAL_INVISIBLE","OPEN_INGREDIENT_MODAL","OPEN_ORDER_MODAL","closeModal","openOrderModal","ConstructorItem","index","ingredient","hash","removeItem","removeContainerItem","findCard","useCallback","card","c","indexOf","moveCard","atIndex","indexFrom","indexAt","originalIndex","end","droppedHash","didDrop","moveCartItemToIndex","drag","useDrop","accept","hover","draggedHash","overIndex","drop","opacity","node","undefined","isLocked","thumbnail","handleClose","useInit","auth","isInitLoaded","setIsInitLoaded","canEnter","setCanEnter","init","enter","BurgerConstructor","isBun","isOrderClicked","setOrderClicked","uuid","addContainerItem","hashTop","hashBottom","setContainerBun","isHover","isOver","dropRef","isFormValid","orderSum","useMemo","reduce","previousValue","currentValue","borderColor","placeholderWrapper","placeholder","lastIndex","footer","imagePath","Loader","loaderWrapper","loaderPrimary","loaderSecondary","Main","isFailed","getIngredients","isError","postOrder","DndProvider","backend","HTML5Backend","main","OrderFeedIconImage","howMuchAfterLast","zIndex","imageWrapper","imageBackground","img","overflowNumber","OrderFeedIcons","iconsId","iconIngredients","setIconsIngredients","forEach","find","prevState","iconsWrapper","image_mobile","createStringOfDate","ISOString","daysBetween","millisecondsInDay","currentDate","Date","orderDate","diffDays","getTime","Math","trunc","hours","getHours","minutes","getMinutes","calcOrderNum","num","withHash","numIsString","toString","numLength","beginOfString","repeat","getWsUserUrl","slice","OrderStatus","status","propClassName","done","classNames","common","OrderFeedCommonHistoryItem","isPrivateHistory","setPrice","date","createdAt","orderItemId","cartItem","fullSize","numOrder","number","time","title","imgWrapper","priceWrapper","OrderFeedCommonHistory","lastMessage","orders","OrderFeedCookingNumbers","digitClass","digit","textClassMarginTop","textClassMarginBottom","numsWrapper","ordersWrapper","order","orderDone","orderCooking","total","totalToday","OrderFeedPage","container","content","OrderIngredientsDetailsItem","quantity","NotFound404","OrderIngredientsDetails","isPrivate","startsWith","params","useParams","uniqueIngredients","ingredientHash","indexOfIngredientInUnique","findIndex","push","acc","currHash","tac","consist","ProtectedFromAuthenticated","render","LoginPage","setEmail","password","setPassword","direction","from","onSubmit","preventDefault","onChange","target","errorText","RegisterPage","setName","ForgotPasswordPage","requestReceived","setRequestReceived","result","event","ShowIconString","ResetPasswordPage","newPassword","setNewPassword","code","setCode","currentIcon","setCurrentIcon","changeSuccess","setChangeSuccess","onIconClick","ProtectedRoute","EditProfile","nameInStore","emailInStore","initDone","setInitDone","nameError","setNameError","emailError","setEmailError","newName","trim","newEmail","String","toLowerCase","match","validateEmail","buttonsWrapper","updateUser","ProfileOrders","ProfilePage","useRouteMatch","aside","navItem","activeNavItem","component","Logout","logoutDone","setLogoutDone","IngredientDetails","image_large","calories","proteins","fat","carbohydrates","ModalOverlay","onClose","overlay","modalRoot","document","getElementById","Modal","escapeHandler","addEventListener","removeEventListener","ReactDOM","createPortal","modal","close","OrderDetails","orderNum","isOrderRequesting","isRequest","formattedOrderNum","gifPath","Routes","history","useHistory","isModalVisible","isOrderModalVisible","closeWithGoBack","goBack","isOrderModal","App","isSuccess","cartSum","isIngredientModalVisible","currentDetailsItem","createReducer","wsConnected","socketType","rootReducer","combineReducers","next","constructor","newItem","newBun","firstItemIndex","secondItemIndex","elem","cartWitchDeletedItem","splice","webSocketReducer","configureStore","reducer","middleware","getDefaultMiddleware","concat","wsOnOpen","wsOnMessage","wsOnError","wsOnClose","WSSendMessageType","WSCloseConnectionType","socket","currentType","WebSocket","onopen","onmessage","parse","onerror","onclose","send","socketMiddleware","StrictMode"],"mappings":"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","file":"static/js/main.59aefca9.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"main_main__tvROX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"order-feed-common-history_wrapper__1aZRU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"iconsWrapper\":\"order-feed-icons_iconsWrapper__2Eo6H\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"buttonsWrapper\":\"edit-profile_buttonsWrapper__2IFSF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"profile-orders_wrapper__1EhYA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"modal-overlay_overlay__AKixE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"section\":\"order-details_section__v3IDd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"ingredient-details_wrapper__39_0t\",\"list\":\"ingredient-details_list__2aOfA\",\"item\":\"ingredient-details_item__2m5b9\",\"text\":\"ingredient-details_text__1jgQH\",\"image\":\"ingredient-details_image__H2-xP\",\"name\":\"ingredient-details_name__3OKTo\",\"title\":\"ingredient-details_title__2_5MB\"};","import React, {ReactNode} from \"react\";\n\nimport styles from \"./nav-item.module.css\";\nimport {NavLink} from \"react-router-dom\";\n\nexport default function NavItem(props: {path: string; isExact: boolean; text: string; children: ReactNode}) {\n  return (\n    <NavLink\n      to={props.path}\n      exact={props.isExact}\n      className={styles.item + \" pl-5 pr-5 pt-4 pb-4 mt-4 mb-4\"}\n      activeClassName={styles.activeNav}\n    >\n      <div className={styles.icon}>\n        {props.children}\n      </div>\n      <p className=\"text text_type_main-default pl-2\">\n        {props.text}\n      </p>\n    </NavLink>\n  );\n}\n","import React from \"react\";\nimport {BurgerIcon, ListIcon, Logo, ProfileIcon} from \"@ya.praktikum/react-developer-burger-ui-components\";\n\nimport NavItem from \"../nav-item/nav-item\";\nimport styles from './app-header.module.css';\nimport {Link} from \"react-router-dom\";\n\n\nexport default function AppHeader() {\n  return (\n    <div className={styles.wrapper}>\n      <header className={styles.header}>\n        <nav className={styles.nav}>\n          <ul className={styles.list}>\n            <li>\n              <NavItem\n                text=\"Конструктор\"\n                path=\"/\"\n                isExact={true}\n              >\n                <BurgerIcon type=\"secondary\"/>\n              </NavItem>\n            </li>\n            <li className=\"ml-2\">\n              <NavItem\n                text=\"Лента заказов\"\n                path=\"/feed\"\n                isExact={true}\n              >\n                <ListIcon type=\"secondary\"/>\n              </NavItem>\n            </li>\n            <li className={styles.item}>\n              <NavItem\n                text=\"Личный кабинет\"\n                path=\"/profile\"\n                isExact={false}\n              >\n                <ProfileIcon type=\"secondary\"/>\n              </NavItem>\n            </li>\n          </ul>\n\n          <Link className={styles.logo} to=\"/\"><Logo/></Link>\n\n        </nav>\n      </header>\n    </div>\n  )\n}\n","export const GET_INGREDIENTS_REQUEST: \"GET_INGREDIENTS_REQUEST\" = \"GET_INGREDIENTS_REQUEST\";\nexport const GET_INGREDIENTS_SUCCESS: \"GET_INGREDIENTS_SUCCESS\" = \"GET_INGREDIENTS_SUCCESS\";\nexport const GET_INGREDIENTS_ERROR: \"GET_INGREDIENTS_ERROR\" = \"GET_INGREDIENTS_ERROR\";\n\nexport const POST_ORDER_REQUEST: \"POST_ORDER_REQUEST\" = \"POST_ORDER_REQUEST\";\nexport const POST_ORDER_SUCCESS: \"POST_ORDER_SUCCESS\" = \"POST_ORDER_SUCCESS\";\nexport const POST_ORDER_ERROR: \"POST_ORDER_ERROR\" = \"POST_ORDER_ERROR\";\n\nexport const SET_ORDER: \"SET_ORDER\" = \"SET_ORDER\";\n\nexport const ADD_CONTAINER_ITEM: \"ADD_CONTAINER_ITEM\" = \"ADD_CONTAINER_ITEM\";\nexport const SET_CONTAINER_BUN: \"SET_CONTAINER_BUN\" = \"SET_CONTAINER_BUN\";\nexport const REMOVE_CONTAINER_ITEM: \"REMOVE_CONTAINER_ITEM\" = \"REMOVE_CONTAINER_ITEM\";\nexport const REPLACE_CART_INGREDIENTS: \"REPLACE_CART_INGREDIENTS\" = \"REPLACE_CART_INGREDIENTS\";\nexport const MOVE_CART_ITEM_TO_INDEX: \"MOVE_CART_ITEM_TO_INDEX\" = \"MOVE_CART_ITEM_TO_INDEX\";\n\nexport const SET_CART_STATE_TO_INITIAL: \"SET_CART_STATE_TO_INITIAL\" = \"SET_CART_STATE_TO_INITIAL\";\n\nexport const CLEAR_CART: \"CLEAR_CART\" = \"CLEAR_CART\";\nexport const CLEAR_ORDER: \"CLEAR_ORDER\" = \"CLEAR_ORDER\";\n","import {createSlice, PayloadAction} from \"@reduxjs/toolkit\";\n\nexport type TAuth = {\n  isAuth: boolean;\n  user: {\n    name: string;\n    email: string;\n  };\n  register: {\n    request: boolean;\n    success: boolean;\n    error: boolean;\n  };\n  login: {\n    request: boolean;\n    success: boolean;\n    error: boolean;\n  };\n};\n\nconst initialAuth: TAuth = {\n  isAuth: false,\n  user: {\n    name: \"\",\n    email: \"\",\n  },\n  register: {\n    request: false,\n    success: false,\n    error: false,\n  },\n  login: {\n    request: false,\n    success: false,\n    error: false,\n  },\n};\n\ntype TResponse = {\n  payload: {\n    user: {\n      name: string,\n      email: string\n    }\n  }\n}\nconst authSlice = createSlice({\n  name: 'auth',\n  initialState: initialAuth,\n  reducers: {\n    registerSuccess(state, action: TResponse) {\n      const data = action.payload;\n      state.isAuth = true;\n      state.user.name = data.user.name;\n      state.user.email = data.user.email;\n      state.register.success = true;\n      state.register.request = false;\n    },\n    registerRequest(state) {\n      state.register.error = false;\n      state.register.request = true;\n\n    },\n    registerError(state) {\n      state.register.request = false;\n      state.register.error = true;\n    },\n    logout(state) {\n      state.isAuth = false;\n      state.user.name = \"\";\n      state.user.email = \"\";\n      state.register.success = false;\n      state.register.request = false;\n      state.register.error = false;\n      state.login.success = false;\n      state.login.request = false;\n      state.login.error = false;\n    },\n    loginSuccess(state, action: TResponse) {\n      const data = action.payload;\n      state.isAuth = true;\n      state.user.name = data.user.name;\n      state.user.email = data.user.email;\n      state.login.success = true;\n      state.login.request = false;\n    },\n    loginRequest(state) {\n      state.login.error = false;\n      state.login.request = true;\n\n    },\n    loginError(state) {\n      state.login.request = false;\n      state.login.error = true;\n    },\n\n    setAuthFalse(state) {\n      state.isAuth = false;\n    },\n    setAuthTrue(state) {\n      state.isAuth = true;\n    },\n    setUserName(state, action: PayloadAction<string>) {\n      state.user.name = action.payload;\n    },\n    setUserEmail(state, action: PayloadAction<string>) {\n      state.user.email = action.payload;\n    },\n  }\n})\n\nexport default authSlice.reducer;\nexport const { actions } = authSlice;\n","import Cookies from 'js-cookie';\nimport {ActionCreator, ActionCreatorWithPayload} from \"@reduxjs/toolkit\";\nimport {AppDispatch, AppThunk} from \"../utils/types\";\nimport {\n  getIngredientsError,\n  getIngredientsRequest, getIngredientsSuccess,\n  postOrderError,\n  postOrderRequest,\n  postOrderSuccess\n} from \"./actions/cart\";\nimport {actions} from \"./reducers/auth\";\n\n// requestAction = getIngredientsRequest,\n//   successAction = getIngredientsSuccess,\n//   errorAction = getIngredientsError\n// requestAction = postOrderRequest,\n//   successAction = postOrderSuccess,\n//   errorAction = postOrderError,\n//  const {registerError, registerRequest, registerSuccess} = actions;\n//  const {loginSuccess, loginError, loginRequest} = actions;\nconst {registerError, registerRequest, registerSuccess, loginSuccess, loginError, loginRequest} = actions;\ntype TRequest =\n  ReturnType<typeof getIngredientsRequest> |\n  ReturnType<typeof postOrderRequest> |\n  ReturnType<typeof registerRequest> |\n  ReturnType<typeof loginRequest>;\ntype TSuccess =\n  ReturnType<typeof getIngredientsSuccess> |\n  ReturnType<typeof postOrderSuccess> |\n  ReturnType<typeof registerSuccess> |\n  ReturnType<typeof loginSuccess>;\ntype TError =\n  ReturnType<typeof getIngredientsError> |\n  ReturnType<typeof postOrderError> |\n  ReturnType<typeof registerError> |\n  ReturnType<typeof loginError>;\nexport const requestData: AppThunk = function (\n  {method, url, requestAction, successAction, errorAction, body, payload, setCookie}: {\n    method: string;\n    url: string;\n    requestAction: ActionCreator<TRequest>;\n    successAction: ActionCreator<TSuccess>;\n    errorAction: ActionCreator<TError>;\n    body?: { email: string; password: string; } | { ingredients: string[]} ;\n    payload?: string[];\n    setCookie?: true;\n  }) {\n\n  return async function (dispatch: AppDispatch) {\n    try {\n      dispatch(requestAction());\n      let header: HeadersInit = {\n        'Content-Type': 'application/json',\n        Authorization: Cookies.get(\"accessToken\")!\n      };\n      const response = await fetch(url, {\n        method: method,\n        mode: 'cors',\n        cache: 'no-cache',\n        credentials: 'same-origin',\n        headers: header,\n        redirect: 'follow',\n        referrerPolicy: 'no-referrer',\n        body: JSON.stringify(body)\n      });\n\n      let data = await response.json();\n      if (response.ok && data.success) {\n\n        dispatch(successAction(data, payload));\n        if (setCookie) {\n          Cookies.set('accessToken', data.accessToken);\n          Cookies.set('refreshToken', data.refreshToken);\n        }\n        return true;\n      } else {\n        dispatch(errorAction());\n        return false;\n      }\n\n    } catch {\n      dispatch(errorAction());\n      return false;\n    }\n  }\n}\n\nconst getUserRequest = (url: string): Promise<Response> => {\n  let header: HeadersInit = {\n    'Content-Type': 'application/json',\n    Authorization: Cookies.get(\"accessToken\")!\n  };\n\n  return fetch(url, {\n    method: 'GET',\n    mode: 'cors',\n    cache: 'no-cache',\n    credentials: 'same-origin',\n    headers: header,\n    redirect: 'follow',\n    referrerPolicy: 'no-referrer'\n  });\n}\nconst getNewAccessTokenRequest = (url: string): Promise<Response> =>\n  fetch(url, {\n    method: 'POST',\n    mode: 'cors',\n    cache: 'no-cache',\n    credentials: 'same-origin',\n    headers: {\n      'Content-Type': 'application/json',\n      //Authorization: token\n    },\n    redirect: 'follow',\n    referrerPolicy: 'no-referrer',\n    body: JSON.stringify({\n      token: Cookies.get(\"refreshToken\")\n    })\n  });\nexport async function getNewAccessToken(url: string) {\n  try {\n    const response = await getNewAccessTokenRequest(url);\n    if (response.ok) {\n      const data = await response.json();\n      if (data.success) {\n        Cookies.set(\"accessToken\", data.accessToken);\n        Cookies.set(\"refreshToken\", data.refreshToken);\n        return data.accessToken;\n      }\n    }\n  } catch (e) {\n\n  }\n}\n\nexport async function checkAccessToken(url: string) {\n  try {\n    const response = await getUserRequest(url);\n\n    if (response.ok) {\n      const data = await response.json();\n      const isSucceed = data.success;\n      return !!isSucceed;\n    } else {\n      return false;\n    }\n\n  } catch {\n    return false;\n  }\n\n}\n\nexport const getUser: AppThunk = function (url: string, setUserName: ActionCreatorWithPayload<string>,\n                                           setUserEmail: ActionCreatorWithPayload<string>) {\n  return async function (dispatch: AppDispatch) {\n    try {\n      const header: HeadersInit = {\n        'Content-Type': 'application/json',\n        Authorization: Cookies.get(\"accessToken\")!\n      } ;\n      const response = await fetch(url, {\n        method: 'GET',\n        mode: 'cors',\n        cache: 'no-cache',\n        credentials: 'same-origin',\n        headers: header,\n        redirect: 'follow',\n        referrerPolicy: 'no-referrer'\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        dispatch(setUserName(data.user.name));\n        dispatch(setUserEmail(data.user.email));\n        return data;\n      } else {\n\n      }\n\n    } catch {\n    }\n\n  }\n}\n\nexport const updateUser: AppThunk = (url: string, body: {\n  name: string,\n  email: string,\n  password: string\n}, setUserName: ActionCreatorWithPayload<string>, setUserEmail: ActionCreatorWithPayload<string>) => {\n  return async function (dispatch: AppDispatch) {\n    try {\n      const header: HeadersInit = {\n        'Content-Type': 'application/json',\n        Authorization: Cookies.get(\"accessToken\")!\n      };\n      const response = await fetch(url, {\n        method: 'PATCH',\n        mode: 'cors',\n        cache: 'no-cache',\n        credentials: 'same-origin',\n        headers: header,\n        redirect: 'follow',\n        referrerPolicy: 'no-referrer',\n        body: JSON.stringify(body)\n      });\n      if (response.ok) {\n        const data = await response.json();\n        await dispatch(setUserName(data.user.name));\n        await dispatch(setUserEmail(data.user.email));\n\n        return data;\n      } else {\n\n      }\n\n    } catch {\n    }\n\n  }\n}\n\nexport async function logoutUser(url: string) {\n  try {\n    const response = await fetch(url, {\n      method: 'POST',\n      mode: 'cors',\n      cache: 'no-cache',\n      credentials: 'same-origin',\n      headers: {\n        'Content-Type': 'application/json',\n        //Authorization: Cookies.get(\"refreshToken\")\n      },\n      redirect: 'follow',\n      referrerPolicy: 'no-referrer',\n      body: JSON.stringify({\n        token: Cookies.get(\"refreshToken\")\n      })\n    });\n    if (response.ok) {\n      const data = await response.json();\n      return data.success;\n    } else {\n      return false;\n    }\n  } catch {\n    return false;\n  }\n\n}\n\nexport async function resetPasswordRequest(url: string, body: {\n  password: string,\n  token: string\n}) {\n  try {\n    const response = await fetch(url, {\n      method: 'POST',\n      mode: 'cors',\n      cache: 'no-cache',\n      credentials: 'same-origin',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      redirect: 'follow',\n      referrerPolicy: 'no-referrer',\n      body: JSON.stringify(body)\n    });\n    if (response.ok) {\n      const data = await response.json();\n      return data.success;\n    } else {\n      return false;\n    }\n  } catch {\n    return false;\n  }\n}\n\nexport async function forgotPasswordRequest(url: string, email: string) {\n  try {\n    const response = await fetch(url, {\n      method: 'POST',\n      mode: 'cors',\n      cache: 'no-cache',\n      credentials: 'same-origin',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      redirect: 'follow',\n      referrerPolicy: 'no-referrer',\n      body: JSON.stringify({\n        email: email\n      })\n    });\n    if (response.ok) {\n      const data = await response.json();\n      return data.success;\n    } else {\n      return false;\n    }\n  } catch {\n    return false;\n  }\n}\n","import {\n    ADD_CONTAINER_ITEM, CLEAR_CART, CLEAR_ORDER,\n    GET_INGREDIENTS_ERROR,\n    GET_INGREDIENTS_REQUEST,\n    GET_INGREDIENTS_SUCCESS,\n    MOVE_CART_ITEM_TO_INDEX, POST_ORDER_ERROR, POST_ORDER_REQUEST, POST_ORDER_SUCCESS,\n    REMOVE_CONTAINER_ITEM,\n    REPLACE_CART_INGREDIENTS, SET_CART_STATE_TO_INITIAL,\n    SET_CONTAINER_BUN,\n    SET_ORDER\n} from \"../actionTypes/cart\";\nimport {v4 as uuid} from \"uuid\";\nimport {requestData} from \"../api\";\nimport {IIngredient} from \"../../utils/types\";\n\n\nexport function getIngredients(\n  url: string,\n  method = \"GET\",\n  requestAction = getIngredientsRequest,\n  successAction = getIngredientsSuccess,\n  errorAction = getIngredientsError\n) {\n    return requestData(\n      {method, url, requestAction, successAction, errorAction}\n    );\n}\nexport function postOrder (\n  url: string,\n  body: {\n      ingredients: string[];\n  },\n  payload: string[],\n  method = \"POST\",\n  requestAction = postOrderRequest,\n  successAction = postOrderSuccess,\n  errorAction = postOrderError,\n) {\n    return requestData({method, url, payload, requestAction, successAction, errorAction, body});\n}\n\ninterface IGetIngredientsRequestAction {\n    readonly type: typeof GET_INGREDIENTS_REQUEST;\n}\ninterface IGetIngredientsSuccessAction {\n    readonly type: typeof GET_INGREDIENTS_SUCCESS;\n    readonly ingredients: ReadonlyArray<IIngredient>;\n}\ninterface IGetIngredientsErrorAction {\n    readonly type: typeof GET_INGREDIENTS_ERROR;\n}\ninterface IPostOrderRequestAction {\n    readonly type: typeof POST_ORDER_REQUEST;\n\n}\ninterface IPostOrderSuccessAction {\n    readonly type: typeof POST_ORDER_SUCCESS;\n    readonly payload: {name: string; order: {number: number}; success: boolean};\n    readonly cartIDs: ReadonlyArray<string>;\n}\ninterface IPostOrderErrorAction {\n    readonly type: typeof POST_ORDER_ERROR;\n}\ninterface ISetOrderAction {\n    readonly type: typeof SET_ORDER;\n    readonly name: string\n    readonly number: number;\n    readonly cartSum: number;\n    readonly cartIDs: ReadonlyArray<string>;\n}\ninterface IAddContainerItemAction {\n    readonly type: typeof ADD_CONTAINER_ITEM;\n    readonly id: string;\n    readonly hash: string;\n}\ninterface IRemoveContainerItemAction {\n    readonly type: typeof REMOVE_CONTAINER_ITEM;\n    readonly hash: string;\n}\ninterface ISetContainerBunAction {\n    readonly type: typeof SET_CONTAINER_BUN;\n    readonly id: string;\n    readonly hashTop: string;\n    readonly hashBottom: string;\n}\ninterface IReplaceCartIngredientsAction {\n    readonly type: typeof REPLACE_CART_INGREDIENTS;\n    readonly indexFrom: number;\n    readonly indexAt: number;\n}\ninterface IMoveCartItemToIndexAction {\n    readonly type: typeof MOVE_CART_ITEM_TO_INDEX;\n    readonly hash: string;\n    readonly indexAt: number;\n}\ninterface ISetCartToInitialAction {\n    readonly type: typeof SET_CART_STATE_TO_INITIAL;\n}\ninterface IClearCartAction {\n    readonly type: typeof CLEAR_CART;\n}\ninterface IClearOrderAction {\n    readonly type: typeof CLEAR_ORDER;\n}\n\nexport type TCartActions = IGetIngredientsRequestAction | IGetIngredientsSuccessAction | IGetIngredientsErrorAction |\n  IPostOrderRequestAction | IPostOrderSuccessAction | IPostOrderErrorAction | ISetOrderAction | IAddContainerItemAction |\n  IRemoveContainerItemAction | ISetContainerBunAction | IReplaceCartIngredientsAction | IMoveCartItemToIndexAction |\n  ISetCartToInitialAction | IClearCartAction | IClearOrderAction;\n\nexport const getIngredientsRequest = (): IGetIngredientsRequestAction => ({\n    type: GET_INGREDIENTS_REQUEST\n})\nexport const getIngredientsSuccess = (json: { success: boolean; data: ReadonlyArray<IIngredient> }): IGetIngredientsSuccessAction => ({\n    type: GET_INGREDIENTS_SUCCESS,\n    ingredients: json.data\n})\nexport const getIngredientsError = (): IGetIngredientsErrorAction => ({\n    type: GET_INGREDIENTS_ERROR\n})\nexport const postOrderRequest = (): IPostOrderRequestAction => ({\n    type: POST_ORDER_REQUEST\n})\nexport const postOrderSuccess = (json: {name: string; order: {number: number}; success: boolean}, cartIDs: Array<string>): IPostOrderSuccessAction => ({\n    type: POST_ORDER_SUCCESS,\n    payload: json,\n    cartIDs\n})\nexport const postOrderError = (): IPostOrderErrorAction => ({\n    type: POST_ORDER_ERROR\n})\nexport const setOrder = (name: string, number: number, cartSum: number, cartIDs: Array<string>): ISetOrderAction => ({\n    type: SET_ORDER,\n    name,\n    number,\n    cartSum,\n    cartIDs\n})\nexport const addContainerItem = (id: string): IAddContainerItemAction => ({\n    type: ADD_CONTAINER_ITEM,\n    id,\n    hash: uuid()\n})\nexport const removeContainerItem = (hash: string): IRemoveContainerItemAction => ({\n    type: REMOVE_CONTAINER_ITEM,\n    hash\n})\nexport const setContainerBun = (id: string): ISetContainerBunAction => ({\n    type: SET_CONTAINER_BUN,\n    id,\n    hashTop: uuid(),\n    hashBottom: uuid()\n})\nexport const replaceCartIngredients = (indexFrom: number, indexAt: number): IReplaceCartIngredientsAction => ({\n    type: REPLACE_CART_INGREDIENTS,\n    indexFrom,\n    indexAt\n})\nexport const moveCartItemToIndex = (hash: string, indexAt: number): IMoveCartItemToIndexAction => ({\n    type: MOVE_CART_ITEM_TO_INDEX,\n    hash,\n    indexAt\n})\nexport const setCartToInitial = (): ISetCartToInitialAction => ({\n    type: SET_CART_STATE_TO_INITIAL\n})\nexport const clearCart = (): IClearCartAction => ({\n    type: CLEAR_CART\n})\nexport const clearOrder = (): IClearOrderAction => ({\n    type: CLEAR_ORDER\n})\n","export const WS_CONNECTION_START = \"WS_CONNECTION_START\" as const;\nexport const WS_CONNECTION_SUCCESS = \"WS_CONNECTION_SUCCESS\" as const;\nexport const WS_CONNECTION_ERROR = \"WS_CONNECTION_ERROR\" as const;\nexport const WS_GET_MESSAGE = \"WS_GET_MESSAGE\" as const;\nexport const WS_CONNECTION_CLOSED = \"WS_CONNECTION_CLOSED\" as const;\nexport const WS_SEND_MESSAGE = \"WS_SEND_MESSAGE\" as const;\nexport const WS_CLOSE_CONNECTION = \"WS_CLOSE_CONNECTION\" as const;\n\n","import {createAction} from \"@reduxjs/toolkit\";\nimport {\n  WS_CLOSE_CONNECTION,\n  WS_CONNECTION_CLOSED,\n  WS_CONNECTION_ERROR,\n  WS_CONNECTION_START,\n  WS_CONNECTION_SUCCESS,\n  WS_GET_MESSAGE, WS_SEND_MESSAGE\n} from \"../actionTypes/wsActionTypes\";\nimport {IwsMessage} from \"../../utils/types\";\nimport {TSocketType} from \"../reducers/webSocketReducer\";\n\nexport const wsConnectionStart = createAction<{type: TSocketType; url: string}, typeof WS_CONNECTION_START>(WS_CONNECTION_START)\nexport const wsConnectionSuccess = createAction(WS_CONNECTION_SUCCESS)\nexport const wsConnectionError = createAction(WS_CONNECTION_ERROR)\nexport const wsGetMessage = createAction<{data: IwsMessage, type: TSocketType}, typeof WS_GET_MESSAGE>(WS_GET_MESSAGE)\nexport const wsConnectionClosed = createAction(WS_CONNECTION_CLOSED)\nexport const wsSendMessage = createAction<IwsMessage, typeof WS_SEND_MESSAGE>(WS_SEND_MESSAGE)\nexport const wsCloseConnection = createAction(WS_CLOSE_CONNECTION)\n\nexport type TWSActions = typeof wsConnectionStart | typeof wsConnectionSuccess | typeof wsConnectionError |\n  typeof wsGetMessage | typeof wsConnectionClosed | typeof wsSendMessage | typeof wsCloseConnection;\n","import {\n  TypedUseSelectorHook,\n  useSelector as selectorHook,\n  useDispatch as dispatchHook\n} from \"react-redux\";\nimport {AppDispatch, AppThunk, RootState} from \"./types\";\nimport {useEffect} from \"react\";\nimport {wsCloseConnection, wsConnectionStart} from \"../services/actions/wsActions\";\nimport {TSocketType} from \"../services/reducers/webSocketReducer\";\n\n// export const useSelector = createSelectorHook<RootState>();\nexport const useSelector: TypedUseSelectorHook<RootState> = selectorHook;\n\nexport const useDispatch = () => dispatchHook<AppDispatch | AppThunk>();\n\nexport const useWSConnect = (url: string, type: TSocketType) => {\n  const dispatch = useDispatch();\n  useEffect(() => {\n    dispatch(wsConnectionStart({url, type}));\n    return () => {\n      dispatch(wsCloseConnection());\n    }\n  }, [dispatch, type, url]);\n\n  return useSelector(store => store.ws.messages);\n}\n\nexport const useGetIngredients = () => {\n  return useSelector(store => store.cart.ingredientsData) || null;\n}\n","export const baseUrl: string = \"https://norma.nomoreparties.space/api/\";\nexport const wsAllOrdersUrl: string = \"wss://norma.nomoreparties.space/orders/all\";\n\nexport const FILLINGS: string = \"Начинки\";\nexport const SAUCES: string = \"Соусы\";\nexport const BUNS: string = \"Булки\";\nexport const ingredientModalHeader: string = \"Детали ингредиента\";\nexport const heightFromTopPageToRelativeBlock: number = 243.59375;\nexport const additionScrollForSaucesAndFillings: number = 40;\nexport const fixTabsPixels: number = 2;\n\nexport const ingredientsEndpoint: string = \"ingredients\";\n\nexport const checkAccessEndpoint: string = \"auth/user\";\nexport const getUserdataEndpoint: string = \"auth/user\";\nexport const refreshTokenEndpoint: string = \"auth/token\";\nexport const forgotPasswordEndpoint: string = \"password-reset\";\nexport const loginEndpoint: string = \"auth/login\";\nexport const logoutEndpoint: string = \"auth/logout\";\nexport const registerEndpoint: string = \"auth/register\";\nexport const resetPasswordEndpoint: string = \"password-reset/reset\";\n","import React, {useEffect, useState} from \"react\";\nimport {Counter, CurrencyIcon} from \"@ya.praktikum/react-developer-burger-ui-components\";\n\nimport styles from './ingredients-item.module.css';\nimport {useDrag} from \"react-dnd\";\nimport {Link, useLocation} from \"react-router-dom\";\nimport {IIngredient} from \"../../utils/types\";\nimport {useSelector} from \"../../utils/hooks\";\n\n\nexport default function IngredientsItem({itemData}: {itemData: IIngredient}) {\n  const location = useLocation();\n  const [counter, setCounter] = useState(0);\n  const cart = useSelector((store) => store.cart.constructorData);\n  useEffect(() => {\n    let newCount = cart.filter(item => item._id === itemData._id).length;\n    setCounter(newCount);\n  }, [cart, itemData]);\n  const [{isDrag}, dragRef] = useDrag({\n    type: \"ingredient\",\n    item: {\n      subtype: itemData.type,\n      id: itemData._id,\n    },\n    collect: monitor => ({\n      isDrag: monitor.isDragging()\n    })\n  });\n  const border = isDrag ? \"1px solid coral\" : \"1px solid transparent\";\n\n  const ingredientId = itemData['_id'];\n  return (\n    <Link\n      key={ingredientId}\n      to={{\n        pathname: `/ingredients/${ingredientId}`,\n        state: { background: location }\n      }}\n      style={{border}} ref={dragRef} className={styles.link + \" mt-6 mb-2\"}\n    >\n      <img src={itemData.image} alt={itemData.name} width=\"240\" height=\"120\"/>\n      <div className={styles.priceWrap + \" pt-1 pb-2\"}>\n        <p className={\"pr-1 white text text_type_digits-default\"}>{itemData.price}</p>\n        <CurrencyIcon type=\"primary\"/>\n      </div>\n      <h3 className={styles.text + \" white text text_type_main-default\"}>{itemData.name}</h3>\n      {counter !== 0 && <Counter count={counter} size=\"default\"/>}\n    </Link>\n\n  );\n}\n","import React, {RefObject, useRef, useState} from \"react\";\nimport {Tab} from \"@ya.praktikum/react-developer-burger-ui-components\";\n\nimport styles from \"./burger-ingredients.module.css\";\nimport IngredientsItem from \"../ingredients-item/ingredients-item\";\nimport {\n  additionScrollForSaucesAndFillings,\n  BUNS,\n  FILLINGS, fixTabsPixels,\n  heightFromTopPageToRelativeBlock,\n  SAUCES\n} from \"../../utils/constants\";\nimport {useSelector} from \"../../utils/hooks\";\n\nexport default function BurgerIngredients() {\n  const [currentTab, setCurrentTab] = useState(BUNS);\n  const ingredientsData = useSelector((store) => store.cart.ingredientsData)!;\n\n  const sectionRef = useRef<HTMLElement>(null);\n  const bunRef = useRef<HTMLHeadingElement>(null);\n  const sauceRef = useRef<HTMLHeadingElement>(null);\n  const mainRef = useRef<HTMLHeadingElement>(null);\n\n  const scrollToRef = (ref: RefObject<HTMLHeadingElement>) => {\n    if (sectionRef?.current && ref?.current) {\n      sectionRef.current.scrollTo(0, ref.current.offsetTop - heightFromTopPageToRelativeBlock - additionScrollForSaucesAndFillings);\n    }\n  }\n\n  const handler = (e: React.SyntheticEvent) => {\n    if (sauceRef?.current && mainRef?.current) {\n      const distanceFromSauceBlockToRelative = sauceRef.current.getBoundingClientRect().top - heightFromTopPageToRelativeBlock - additionScrollForSaucesAndFillings;\n      const distanceFromMainBlockToRelative = mainRef.current.getBoundingClientRect().top - heightFromTopPageToRelativeBlock - additionScrollForSaucesAndFillings;\n      if (distanceFromMainBlockToRelative <= fixTabsPixels) {\n        if (currentTab !== FILLINGS) setCurrentTab(FILLINGS);\n      } else if (distanceFromSauceBlockToRelative <= fixTabsPixels) {\n        if (currentTab !== SAUCES) setCurrentTab(SAUCES);\n      } else if (currentTab !== BUNS) {\n        setCurrentTab(BUNS)\n      }\n    }\n\n  }\n\n\n  return (\n    <section className={styles.section}>\n      <h1 className=\"white text text_type_main-large mt-10 mb-5\">Соберите бургер</h1>\n      <div className={styles.tab}>\n        <Tab value={BUNS} active={currentTab === BUNS} onClick={ingredientType => {\n          setCurrentTab(ingredientType);\n          scrollToRef(bunRef)\n        }}>\n          Булки\n        </Tab>\n        <Tab value={SAUCES} active={currentTab === SAUCES} onClick={ingredientType => {\n          setCurrentTab(ingredientType);\n          scrollToRef(sauceRef)\n        }}>\n          Соусы\n        </Tab>\n        <Tab value={FILLINGS} active={currentTab === FILLINGS} onClick={ingredientType => {\n          setCurrentTab(ingredientType);\n          scrollToRef(mainRef)\n        }}>\n          Начинки\n        </Tab>\n      </div>\n      <section className={styles.menu + \" scrollbar\"} ref={sectionRef} onScroll={handler}>\n        <h2 className=\"white text text_type_main-medium pt-10\" ref={bunRef}>{BUNS}</h2>\n        <div className={styles.grid}>\n          {\n            ingredientsData.map((item) => ((item.type === \"bun\") ? (\n              <IngredientsItem key={item._id} itemData={item}/>) : null))\n          }\n        </div>\n        <h2 className=\"white text text_type_main-medium\" ref={sauceRef}>{SAUCES}</h2>\n        <div className={styles.grid}>\n          {\n            ingredientsData.map((item) => ((item.type === \"sauce\") ? (\n              <IngredientsItem key={item._id} itemData={item}/>) : null))\n          }\n        </div>\n        <h2 className=\"white text text_type_main-medium\" ref={mainRef}>{FILLINGS}</h2>\n        <div className={styles.grid}>\n          {\n            ingredientsData.map((item) => ((item.type === \"main\") ? (\n              <IngredientsItem key={item._id} itemData={item}/>) : null))\n          }\n        </div>\n\n      </section>\n    </section>\n  );\n}\n","export default __webpack_public_path__ + \"static/media/Subtract.c76f6647.svg\";","export const REQUEST_IS_READY: \"REQUEST_IS_READY\" = \"REQUEST_IS_READY\";\nexport const SET_MODAL_INVISIBLE: \"SET_MODAL_INVISIBLE\" = \"SET_MODAL_INVISIBLE\";\n\nexport const OPEN_INGREDIENT_MODAL: \"OPEN_INGREDIENT_MODAL\" = \"OPEN_INGREDIENT_MODAL\";\nexport const OPEN_ORDER_MODAL: \"OPEN_ORDER_MODAL\" = \"OPEN_ORDER_MODAL\";\n","import {\n    OPEN_INGREDIENT_MODAL,\n    OPEN_ORDER_MODAL,\n    REQUEST_IS_READY,\n    SET_MODAL_INVISIBLE,\n\n} from \"../actionTypes/modal\";\nimport {IIngredient} from \"../../utils/types\";\n\ninterface IRequestIsReady {\n    readonly type: typeof REQUEST_IS_READY;\n}\ninterface ICloseModal {\n    readonly type: typeof SET_MODAL_INVISIBLE;\n}\ninterface IOpenIngredientModal {\n    readonly type: typeof OPEN_INGREDIENT_MODAL;\n    readonly payload: Readonly<IIngredient>;\n}\ninterface IOpenOrderModal {\n    readonly type: typeof OPEN_ORDER_MODAL;\n}\n\nexport type TModalActions = IRequestIsReady | ICloseModal | IOpenIngredientModal | IOpenOrderModal;\n\n\nexport const requestIsReady = (): IRequestIsReady => ({\n    type: REQUEST_IS_READY\n})\n\nexport const closeModal = (): ICloseModal => ({\n    type: SET_MODAL_INVISIBLE\n})\n\nexport const openIngredientModal = (itemData: IIngredient): IOpenIngredientModal => ({\n    type: OPEN_INGREDIENT_MODAL,\n    payload: itemData\n})\nexport const openOrderModal = (): IOpenOrderModal => ({\n    type: OPEN_ORDER_MODAL\n})\n","import React, {useCallback} from \"react\";\nimport {ConstructorElement, DragIcon} from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport styles from \"./constructor-item.module.css\";\nimport {moveCartItemToIndex, removeContainerItem, replaceCartIngredients} from \"../../services/actions/cart\";\nimport {useDrag, useDrop} from \"react-dnd\";\nimport {useDispatch, useSelector} from \"../../utils/hooks\";\n\nfunction ConstructorItem({index}: {index: number}) {\n  const cart = useSelector((state) => state.cart.constructorData);\n  const ingredient = cart[index];\n  const {hash} = ingredient;\n  const dispatch = useDispatch();\n  const removeItem = (hash: string) => {\n    dispatch(removeContainerItem(hash))\n  }\n\n\n  const findCard = useCallback((hash) => {\n    const card = cart.filter((c) => `${c.hash}` === hash)[0];\n    return {\n      card,\n      index: cart.indexOf(card),\n    };\n  }, [cart]);\n  const moveCard = useCallback((hash, atIndex) => {\n    const {index} = findCard(hash);\n    dispatch(replaceCartIngredients(index, atIndex));\n  }, [findCard, dispatch]);\n  const originalIndex = findCard(hash).index;\n  const [{isDragging}, drag] = useDrag(() => ({\n    type: \"sort\",\n    item: {hash, originalIndex},\n    collect: (monitor) => ({\n      isDragging: monitor.isDragging(),\n    }),\n    end: (item, monitor) => {\n      const {hash: droppedHash, originalIndex} = item;\n      const didDrop = monitor.didDrop();\n      if (!didDrop) {\n        dispatch(moveCartItemToIndex(droppedHash, originalIndex));\n      }\n    },\n  }), [hash, originalIndex, moveCard]);\n  const [, drop] = useDrop(() => ({\n    accept: \"sort\",\n    hover({hash: draggedHash}: {hash: string}) {\n      //const isItemInCart = cart.filter(item => item.hash === draggedHash).length !== 0;\n      if (draggedHash !== hash) {\n        const {index: overIndex} = findCard(hash);\n        moveCard(draggedHash, overIndex);\n      }\n    },\n  }), [findCard, moveCard]);\n  const opacity = isDragging ? 0 : 1;\n\n  return (\n    <li className={styles.item} ref={(node) => drag(drop(node))} style={{opacity}}>\n      <div className={styles.icon}>\n        <DragIcon type=\"primary\"/>\n      </div>\n      <div className=\"ml-8\">\n        <ConstructorElement\n          type={undefined}\n          isLocked={false}\n          text={ingredient.name}\n          price={ingredient.price}\n          thumbnail={ingredient.image}\n          handleClose={() => removeItem(ingredient.hash)}\n        />\n      </div>\n    </li>\n  );\n}\n\nexport default ConstructorItem;\n","import {checkAccessToken, getNewAccessToken} from \"./api\";\nimport {baseUrl, checkAccessEndpoint, refreshTokenEndpoint} from \"../utils/constants\";\nimport {actions} from \"./reducers/auth\";\nimport {useCallback, useState} from \"react\";\nimport {useDispatch, useSelector} from \"../utils/hooks\";\n\nfunction useInit() {\n  const dispatch = useDispatch();\n  const isAuth = useSelector((store) => store.auth.isAuth);\n  const {setAuthFalse, setAuthTrue} = actions;\n  const [isInitLoaded, setIsInitLoaded] = useState(false);\n  const [canEnter, setCanEnter] = useState(false);\n  const init = useCallback(async (type?: string) => {\n    let enter: boolean | undefined;\n    if (type === \"vsNotAuth\") {\n      enter = await checkAccessToken(baseUrl + checkAccessEndpoint);\n      if (!isAuth && enter) {\n        await dispatch(setAuthTrue());\n      }\n      if (!enter) {\n        await getNewAccessToken(baseUrl + refreshTokenEndpoint);\n        enter = await checkAccessToken(baseUrl + checkAccessEndpoint);\n        if (isAuth && !enter) {\n          await dispatch(setAuthFalse());\n        }\n      }\n      await setCanEnter(enter);\n    }\n    setIsInitLoaded(true);\n    return enter;\n  }, [isAuth, dispatch, setAuthTrue, setAuthFalse]);\n  return {init, isInitLoaded, canEnter};\n}\nexport default useInit;\n","import React, {useMemo, useState} from \"react\";\nimport styles from \"./burger-constructor.module.css\";\nimport {Button, ConstructorElement} from \"@ya.praktikum/react-developer-burger-ui-components\";\n\nimport imagePath from '../../images/Subtract.svg';\nimport {openOrderModal} from \"../../services/actions/modal\";\nimport {useDrop} from \"react-dnd\";\nimport {addContainerItem, setContainerBun} from \"../../services/actions/cart\";\nimport ConstructorItem from \"../constructor-item/constructor-item\";\nimport {Redirect} from \"react-router-dom\";\nimport useInit from \"../../services/useInit\";\nimport {IHashIngredient} from \"../../utils/types\";\nimport {useSelector, useDispatch} from \"../../utils/hooks\";\n\n\nexport default function BurgerConstructor() {\n  const cart = useSelector((store) => store.cart.constructorData);\n  const isBun = cart[0]?.type === \"bun\";\n  const {init, isInitLoaded, canEnter} = useInit();\n\n\n  const [isOrderClicked, setOrderClicked] = useState(false);\n  const dispatch = useDispatch();\n  const [{isHover}, dropRef] = useDrop({\n    accept: \"ingredient\",\n    drop(item: {subtype: string, id: string}) {\n      const {subtype, id} = item;\n      if (subtype === \"main\" || subtype === \"sauce\") {\n        dispatch(addContainerItem(id));\n      } else if (subtype === \"bun\") {\n        dispatch(setContainerBun(id))\n      }\n    },\n    collect: monitor => ({\n      isHover: monitor.isOver()\n    })\n  })\n\n  async function setOrder() {\n    const canEnter = await init(\"vsNotAuth\");\n    setOrderClicked(true);\n    const isFormValid = cart.length >= 3 && cart[0].type === \"bun\";\n    if (canEnter && isFormValid) {\n      dispatch(openOrderModal());\n    }\n  }\n\n  const orderSum = useMemo(() => {\n    const reducer = (previousValue: number, currentValue: IHashIngredient) => {\n      return previousValue + currentValue.price;\n    };\n    return cart.reduce(reducer, 0);\n  }, [cart]);\n\n  const borderColor = isHover ? \"lightskyblue\" : \"transparent\";\n  if (isInitLoaded && !canEnter && isOrderClicked) {\n    return (\n      <Redirect to=\"/login\"/>\n    );\n  }\n  return (\n    <section className={styles.section}>\n      <div className={styles.cart} style={{borderColor}} ref={dropRef}>\n        {cart.length === 0 && (\n          <span className={styles.placeholderWrapper}>\n                        <p className={styles.placeholder}>Для создания заказа перетащите булку и ингредиенты</p>\n                    </span>\n        )}\n        {isBun && (\n          <div className=\"ml-8\">\n            <ConstructorElement\n              type={\"top\"}\n              isLocked={true}\n              text={cart[0].name + \" (верх)\"}\n              price={cart[0].price}\n              thumbnail={cart[0].image}\n            />\n          </div>\n        )}\n        <div className={styles.wrapper + \" scrollbar mt-4 mb-4\"}>\n          <ul className={styles.list}>\n            {cart.map((ingredient: IHashIngredient, index: number) => {\n              const lastIndex = cart.length - 1;\n              if ((index === 0 || index === lastIndex) && cart[index].type === \"bun\") {\n                return null;\n              }\n              return (\n                <ConstructorItem key={ingredient.hash} index={index}/>\n              )\n            })}\n          </ul>\n        </div>\n        {cart[cart.length - 1]?.type === \"bun\" && (\n          <div className=\"ml-8\">\n            <ConstructorElement\n              type={\"bottom\"}\n              isLocked={true}\n              text={cart[cart.length - 1].name + \" (низ)\"}\n              price={cart[cart.length - 1].price}\n              thumbnail={cart[cart.length - 1].image}\n            />\n          </div>\n        )}\n      </div>\n      <div className={styles.footer}>\n\n        <p className=\"white text text_type_digits-medium\">{orderSum}</p>\n\n        <img className=\"mr-10 ml-3\" src={imagePath} alt=\"Цена\"/>\n        <Button type=\"primary\" size=\"medium\" onClick={setOrder}>\n          Оформить заказ\n        </Button>\n      </div>\n\n\n    </section>\n  )\n}\n","import React from \"react\";\nimport styles from \"./loader.module.css\";\n\nfunction Loader({type}: {type: \"primary\" | \"secondary\"}) {\n  return (\n    <div className={styles.loaderWrapper}>\n      <div className={type === \"primary\" ? styles.loaderPrimary : styles.loaderSecondary}/>\n    </div>\n  );\n}\n\nexport default Loader;\n","import styles from \"./main.module.css\";\nimport BurgerIngredients from \"../../components/burger-ingredients/burger-ingredients\";\nimport BurgerConstructor from \"../../components/burger-constructor/burger-constructor\";\nimport React from \"react\";\nimport {DndProvider} from \"react-dnd\";\nimport {HTML5Backend} from \"react-dnd-html5-backend\";\nimport Loader from \"../../components/loader/loader\";\nimport {useSelector} from \"../../utils/hooks\";\n\n\nfunction Main() {\n  const {ingredientsData, isFailed} = useSelector((store) => ({\n    ingredientsData: store.cart.ingredientsData,\n    isFailed: store.cart.getIngredients.isError || store.cart.postOrder.isError\n  }))\n\n\n  return (\n    <>\n      {(ingredientsData && !isFailed && (\n        <DndProvider backend={HTML5Backend}>\n          <main className={styles.main}>\n            <BurgerIngredients/>\n            <BurgerConstructor/>\n          </main>\n        </DndProvider>\n      )) || <Loader type=\"secondary\"/>}\n      {isFailed && <p className=\"error\">Ошибка соединения с сервером</p>}\n\n    </>\n  )\n}\n\nexport default Main;\n","import React, {FC} from 'react';\nimport styles from \"./order-feed-icon-image.module.css\";\n\nconst OrderFeedIconImage: FC<{src: string, index?: number, howMuchAfterLast?: number}> = ({src, index, howMuchAfterLast}) => {\n  return (\n    <div style={{zIndex: typeof index === \"number\" ? 7 - index : 1}} className={styles.imageWrapper}>\n      <div className={styles.imageBackground}>\n        <img style={{opacity: howMuchAfterLast ? 0.6 : 1}} className={styles.img} src={src} alt=\"\" />\n        {!!howMuchAfterLast && (\n          <p className={styles.overflowNumber + \" text text_type_main-default\"}>+{howMuchAfterLast}</p>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default OrderFeedIconImage;\n","import React, {FC, useEffect, useState} from 'react';\nimport {useSelector} from \"../../utils/hooks\";\nimport {IIngredient} from \"../../utils/types\";\nimport OrderFeedIconImage from \"../order-feed-icon-image/order-feed-icon-image\";\n\nimport styles from \"./order-feed-icons.module.css\";\n\nconst OrderFeedIcons: FC<{iconsId: string[]}> = ({iconsId}) => {\n  const ingredients = useSelector(store => store.cart.ingredientsData);\n  const [iconIngredients, setIconsIngredients] = useState<IIngredient[]>([]);\n  useEffect(() => {\n    if (!iconIngredients.length) {\n      iconsId.forEach(id => {\n        const ingredient = ingredients?.find(item => item._id === id);\n        if (ingredient) {\n          setIconsIngredients(prevState => [...prevState, ingredient]);\n        }\n      })\n    }\n  }, [ingredients, iconsId, iconIngredients]);\n  return (\n    <div className={styles.iconsWrapper}>\n      {iconIngredients.map((item, index) => {\n        if (index > 5) {\n          return null;\n        }\n        if (index === 5) {\n          return <OrderFeedIconImage\n            key={item._id + index}\n            index={index}\n            src={item.image_mobile}\n            howMuchAfterLast={iconIngredients.length - 6}\n          />\n        }\n        return <OrderFeedIconImage key={item._id + index} index={index} src={item.image_mobile} />\n      })}\n    </div>\n  );\n};\n\nexport default OrderFeedIcons;\n","import Cookies from \"js-cookie\";\n\nexport const compareArrays = <T>(array1: ReadonlyArray<T>, array2: ReadonlyArray<T>) => {\n    return array1.length === array2.length && array1.every((value, index) => value === array2[index]);\n};\n\nexport const validateEmail = (email: string) => {\n    return String(email)\n      .toLowerCase()\n      .match(\n        /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/\n      );\n};\n\nexport function createStringOfDate(ISOString: string): string {\n  const millisecondsInDay = 86400000;\n  const currentDate = new Date();\n  const orderDate = new Date(ISOString);\n  const beginOfCurrentDate = currentDate.getTime() - currentDate.getTime() % millisecondsInDay;\n  const diffInMsc = beginOfCurrentDate - new Date(ISOString).getTime();\n  let diffDays = diffInMsc / millisecondsInDay;\n  let daysBetween;\n  if (diffDays <= 0) {\n    daysBetween = \"Сегодня\";\n  } else if (diffDays < 1){\n    daysBetween = \"Вчера\";\n  } else {\n    daysBetween = `${Math.trunc(diffDays) + 1} дней назад`;\n  }\n  const hours = orderDate.getHours();\n  const minutes = orderDate.getMinutes();\n  return `${daysBetween}, ${hours}:${minutes > 9 ? minutes : \"0\" + minutes} i-GMT+3`;\n}\n\nexport const calcOrderNum = (num: number, withHash?: boolean) => {\n  const numIsString = num.toString();\n  const numLength = numIsString.length;\n  const beginOfString = withHash ? \"#\" : \"\";\n  if (numIsString.length < 6) {\n    return beginOfString + \"0\".repeat(6 - numLength) + num;\n  }\n  return beginOfString + numIsString;\n}\n\nexport const getWsUserUrl = () => {\n  const token = Cookies.get(\"accessToken\")\n  return `wss://norma.nomoreparties.space/orders?token=${token?.slice(7)}`;\n}\n","import React, {FC} from 'react';\nimport styles from \"./order-status.module.css\";\nimport classNames from \"classnames\";\n\nconst OrderStatus: FC<{status: string, propClassName?: string}> = ({status, propClassName}) => {\n  let text;\n  let className;\n  switch (status) {\n    case \"done\": {\n      text = \"Выполнен\";\n      className = styles.done;\n      break;\n    }\n    case \"pending\": {\n      text = \"Готовится\";\n      break;\n    }\n    case \"created\": {\n      text = \"Отменён\";\n    }\n  }\n  return (\n    <p className={classNames(className, propClassName, styles.common, \"text text_type_main-default\")}>{text}</p>\n  );\n};\n\nexport default OrderStatus;\n","import React, {FC, useEffect, useMemo, useState} from 'react';\nimport styles from './order-feed-common-history-item.module.css';\nimport OrderFeedIcons from \"../order-feed-icons/order-feed-icons\";\nimport {CurrencyIcon} from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport {IwsOrder} from \"../../utils/types\";\nimport {useSelector} from \"../../utils/hooks\";\nimport {createStringOfDate} from \"../../utils/utils\";\nimport {Link, useLocation} from \"react-router-dom\";\nimport classNames from \"classnames\";\nimport OrderStatus from \"../order-status/order-status\";\n\n\nconst OrderFeedCommonHistoryItem: FC<{ cart: IwsOrder, isPrivateHistory?: boolean }> = ({cart, isPrivateHistory}) => {\n  const location = useLocation();\n  const [price, setPrice] = useState(0);\n  const ingredientsData = useSelector(store => store.cart.ingredientsData);\n  const date = useMemo(() => createStringOfDate(cart.createdAt), [cart.createdAt]);\n  useEffect(() => {\n    let price = 0;\n    cart.ingredients.forEach((orderItemId) => {\n      const cartItem = ingredientsData?.find(cartItem => cartItem._id === orderItemId);\n      price += cartItem ? cartItem.price : 0;\n    })\n    setPrice(price);\n  }, [ingredientsData, cart]);\n  return (\n    <Link\n      to={{\n        pathname: `/${isPrivateHistory ? \"profile/orders\" : \"feed\"}/${cart._id}`,\n        state: {background: location}\n      }}\n    >\n      <div className={classNames(styles.wrapper, isPrivateHistory ? styles.fullSize : null)}>\n        <p className={styles.numOrder + \" text text_type_digits-default\"}>{cart.number}</p>\n        <p className={styles.time + \" text text_type_main-default text_color_inactive\"}>{date}</p>\n        <h3 className={styles.title + \" text text_type_main-medium\"}>{cart.name}</h3>\n        {isPrivateHistory && (\n          <OrderStatus status={cart.status} propClassName={styles.status}/>\n        )}\n        <div className={styles.imgWrapper}>\n          <OrderFeedIcons iconsId={cart.ingredients}/>\n        </div>\n        <div className={styles.priceWrapper}>\n          <p className={styles.price + \" text text_type_digits-default\"}>{price}</p>\n          <CurrencyIcon type=\"primary\"/>\n        </div>\n      </div>\n    </Link>\n  );\n};\n\nexport default OrderFeedCommonHistoryItem;\n","import React, {FC} from 'react';\nimport styles from \"./order-feed-common-history.module.css\";\nimport OrderFeedCommonHistoryItem from \"../order-feed-common-history-item/order-feed-common-history-item\";\nimport {IwsMessage, IwsOrder} from \"../../utils/types\";\nimport classNames from \"classnames\";\n\nconst OrderFeedCommonHistory: FC<\n    {lastMessage: IwsMessage, isPrivateHistory?: boolean}\n  > = ({lastMessage, isPrivateHistory}) => {\n  return (\n    <div className={classNames(styles.wrapper, \"scrollbar pr-2\")}>\n      {lastMessage.orders.map((item: IwsOrder) => {\n        return <OrderFeedCommonHistoryItem\n          key={item._id}\n          cart={item}\n          isPrivateHistory={isPrivateHistory}\n        />\n      })}\n    </div>\n  );\n};\n\nexport default OrderFeedCommonHistory;\n","import React, {FC} from 'react';\nimport styles from \"./order-feed-cooking-numbers.module.css\";\nimport classNames from \"classnames\";\nimport {IwsMessage} from \"../../utils/types\";\nconst OrderFeedCookingNumbers: FC<{lastMessage: IwsMessage}> = ({lastMessage}) => {\n  const digitClass = classNames(\"text text_type_digits-large\", styles.digit);\n  const textClassMarginTop = classNames(\"text text_type_main-medium\", \"mt-15\", styles.text);\n  const textClassMarginBottom = classNames(\"text text_type_main-medium\", \"mb-6\", styles.text);\n  return (\n    <div>\n      <div className={styles.numsWrapper}>\n        <div>\n          <p className={textClassMarginBottom}>Готовы:</p>\n          <div className={classNames(styles.ordersWrapper, \"scrollbar\")}>\n            {lastMessage.orders.filter(order => order.status === \"done\").map(order => (\n              <p className={classNames(\"text text_type_digits-default mb-2\", styles.orderDone)} key={order._id}>{order.number}</p>\n            ))}\n          </div>\n        </div>\n        <div>\n          <p className={textClassMarginBottom}>В работе:</p>\n          {/*<p>{lastMessage.}</p>*/}\n          <div className={classNames(styles.ordersWrapper, \"scrollbar\")}>\n            {lastMessage.orders.filter((order, index) => order.status !== \"done\").map(order => (\n              <p className={classNames(\"text text_type_digits-default mb-2\", styles.orderCooking)} key={order._id}>{order.number}</p>\n            ))}\n          </div>\n        </div>\n      </div>\n      <p className={textClassMarginTop}>Выполнено за все время</p>\n      <p className={digitClass}>{lastMessage.total}</p>\n      <p className={textClassMarginTop}>Выполнено за сегодня:</p>\n      <p className={digitClass}>{lastMessage.totalToday}</p>\n    </div>\n  );\n};\n\nexport default OrderFeedCookingNumbers;\n","import React from 'react';\nimport styles from \"./order-feed-page.module.css\";\nimport OrderFeedCommonHistory from \"../../components/order-feed-common-history/order-feed-common-history\";\nimport OrderFeedCookingNumbers from \"../../components/order-feed-cooking-numbers/order-feed-cooking-numbers\";\nimport {useWSConnect} from \"../../utils/hooks\";\nimport {wsAllOrdersUrl} from \"../../utils/constants\";\n\nconst OrderFeedPage = () => {\n  const messages = useWSConnect(wsAllOrdersUrl, \"all\");\n\n  return (\n    <div className={styles.container}>\n      <h1 className={styles.title + \" text text_type_main-large mb-5\"}>Лента заказов</h1>\n        {messages.length !== 0 && (\n          <div className={styles.content}>\n            <OrderFeedCommonHistory lastMessage={messages[messages.length - 1]}/>\n            <OrderFeedCookingNumbers lastMessage={messages[messages.length - 1]} />\n          </div>\n        )}\n\n\n    </div>\n  );\n};\n\nexport default OrderFeedPage;\n","import React, {FC} from 'react';\nimport {useGetIngredients} from \"../../utils/hooks\";\nimport OrderFeedIconImage from \"../order-feed-icon-image/order-feed-icon-image\";\nimport styles from \"./order-ingredients-details-item.module.css\";\nimport {CurrencyIcon} from \"@ya.praktikum/react-developer-burger-ui-components\";\n\nconst OrderIngredientsDetailsItem: FC<{hash: string, quantity: number}> = ({hash, quantity}) => {\n  const ingredients = useGetIngredients();\n\n  const ingredient = ingredients?.find(item => item._id === hash);\n  if (!ingredient) {\n    return null;\n  }\n  return (\n    <div className={styles.wrapper + \" pb-4\"}>\n      <OrderFeedIconImage src={ingredient.image_mobile} />\n      <p className={\"text text_type_main-default\"}>{ingredient.name}</p>\n      <div className={styles.priceWrapper}>\n        <p className={styles.price + \" text text_type_digits-default\"}>{quantity} x {ingredient.price}</p>\n        <CurrencyIcon type=\"primary\" />\n      </div>\n    </div>\n  );\n};\n\nexport default OrderIngredientsDetailsItem;\n","import React from \"react\";\nimport styles from './not-found-404.module.css';\n\nfunction NotFound404() {\n\n  return (\n    <section className={styles.wrapper}>\n      <h1 className={styles.title}>Страница не найдена</h1>\n    </section>\n  )\n}\n\nexport default NotFound404;\n","import React, {useEffect} from 'react';\nimport {useLocation, useParams} from \"react-router-dom\";\nimport {useDispatch, useGetIngredients, useSelector} from \"../../utils/hooks\";\nimport styles from \"./order-ingredients-details.module.css\";\nimport classNames from \"classnames\";\nimport OrderStatus from \"../order-status/order-status\";\nimport {calcOrderNum, createStringOfDate, getWsUserUrl} from \"../../utils/utils\";\nimport OrderIngredientsDetailsItem from \"../order-ingredients-details-item/order-ingredients-details-item\";\nimport {CurrencyIcon} from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport {wsAllOrdersUrl} from \"../../utils/constants\";\nimport NotFound404 from \"../../pages/not-found-404/not-found-404\";\nimport {wsConnectionStart} from \"../../services/actions/wsActions\";\n\nconst OrderIngredientsDetails = () => {\n  const dispatch = useDispatch();\n  const location = useLocation();\n  const isPrivate = location.pathname.startsWith(\"/profile/orders/\");\n  const messages =  useSelector(store => store.ws.messages);\n  useEffect(() => {\n    if (!location.state) {\n      if (isPrivate) {\n        dispatch(wsConnectionStart({url: getWsUserUrl(), type: \"user\"}));\n      } else {\n        dispatch(wsConnectionStart({url: wsAllOrdersUrl, type: \"all\"}));\n      }\n    }\n  }, [dispatch, isPrivate, location]);\n\n  const params: {id: string} = useParams();\n  const order = messages[0]?.orders?.find(item => item._id === params.id);\n  const ingredients = useGetIngredients();\n  const uniqueIngredients: {hash: string, quantity: number}[] = [];\n  order?.ingredients.forEach(ingredientHash => {\n    const indexOfIngredientInUnique = uniqueIngredients.findIndex(item => item.hash === ingredientHash);\n    if (indexOfIngredientInUnique !== -1) {\n      uniqueIngredients[indexOfIngredientInUnique].quantity += 1;\n    } else {\n      uniqueIngredients.push({\n        hash: ingredientHash,\n        quantity: 1\n      })\n    }\n  })\n  const price = order?.ingredients.reduce((acc: number, currHash: string) => {\n      const cartItem = ingredients?.find(cartItem => cartItem._id === currHash);\n      return cartItem ? acc + cartItem.price : acc;\n  }, 0)\n  if (!ingredients?.length || (!order && !messages.length)) {\n    return null;\n  }\n  if (!order) {\n    return <NotFound404 />;\n  }\n  return (\n    <div className={classNames(styles.wrapper, !location.state ? \"mt-30\" : null)}>\n      <p className={classNames(styles.number, \"text text_type_digits-default\", location.state ? styles.tac : null)}>{calcOrderNum(order.number, true)}</p>\n      <p className={classNames(styles.title, \"text text_type_main-medium mt-10 mb-3\")}>{order.name}</p>\n      <OrderStatus status={order.status} propClassName={styles.status}/>\n      <p className={classNames(styles.consist, \"text text_type_main-medium mt-15 mb-6\")}>Состав:</p>\n      <div className={classNames(styles.data, \"scrollbar pr-6 mb-10\")}>\n        {uniqueIngredients.map((item, index) => <OrderIngredientsDetailsItem key={index} hash={item.hash} quantity={item.quantity}/>)}\n      </div>\n      <p className={styles.time + \" text text_type_main-default text_color_inactive\"}>{createStringOfDate(order.createdAt)}</p>\n      <div className={styles.priceWrapper}>\n        <p className={styles.price + \" text text_type_digits-default\"}>{price}</p>\n        <CurrencyIcon type=\"primary\" />\n      </div>\n    </div>\n  );\n};\n\nexport default OrderIngredientsDetails;\n","import React, {useEffect} from \"react\";\nimport {Redirect, Route} from \"react-router-dom\";\nimport useInit from \"../../services/useInit\";\nimport Loader from \"../../components/loader/loader\";\nimport {useSelector} from \"../../utils/hooks\";\n\nconst ProtectedFromAuthenticated: React.FC<{path: string; exact: boolean}> = ({children, path, exact}) => {\n  const {init, isInitLoaded} = useInit();\n  useEffect(() => {\n    init();\n  }, [init]);\n\n  const isAuth = useSelector((store) => store.auth.isAuth);\n  if (!isInitLoaded) {\n    return (\n      <Loader type=\"secondary\"/>\n    )\n  }\n\n  return (\n    <Route\n      path={path}\n      exact={exact}\n      render={() =>\n        !isAuth ? (\n          <>\n          {children}\n          </>\n        ) : (\n          <Redirect to=\"/\"/>\n        )\n      }\n    />\n  );\n}\n\nexport default ProtectedFromAuthenticated;\n","import React, {useState} from 'react';\nimport {Input, PasswordInput, Button} from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport {Link, Redirect, useLocation} from \"react-router-dom\";\nimport {baseUrl, loginEndpoint} from \"../../utils/constants\";\nimport {actions} from \"../../services/reducers/auth\";\nimport {requestData} from \"../../services/api\";\nimport {useDispatch, useSelector} from \"../../utils/hooks\";\n\nfunction LoginPage() {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const isAuth = useSelector((store) => store.auth.isAuth);\n  const dispatch = useDispatch();\n  const {loginSuccess, loginError, loginRequest} = actions;\n  interface LocationState {\n    from: {\n      pathname: string;\n    };\n  }\n  const location = useLocation<LocationState>();\n  const direction = location.state?.from?.pathname || \"/\";\n\n  const onChangeEmail = (e: { target: HTMLInputElement }) => {\n    setEmail(e.target.value)\n  }\n  const onChangePassword: React.ChangeEventHandler<HTMLInputElement> = (e) => {\n    setPassword(e.target.value)\n  }\n  const onSubmit: React.FormEventHandler = (e) => {\n    e.preventDefault();\n    const body = {\n      email, password\n    }\n    dispatch(requestData({\n      method: \"POST\",\n      url: baseUrl + loginEndpoint,\n      body: body,\n      successAction: loginSuccess,\n      requestAction: loginRequest,\n      errorAction: loginError,\n      setCookie: true\n    }));\n\n  }\n  if (isAuth) {\n    return (\n      <Redirect to={{pathname: direction}}/>\n    )\n  }\n\n  return (\n    <section className=\"auth__section\">\n      <form className=\"auth__form\" onSubmit={onSubmit}>\n        <h1 className=\"auth__title text text_type_main-medium\">Вход</h1>\n        <Input\n          type={'email'}\n          placeholder={'E-mail'}\n          onChange={onChangeEmail}\n          value={email}\n          error={false}\n          errorText={'Ошибка'}\n          size={'default'}\n        />\n        <PasswordInput\n          onChange={onChangePassword}\n          value={password}\n          name={'password'}\n        />\n        <Button type=\"primary\" size=\"medium\">\n          Войти\n        </Button>\n      </form>\n      <p className=\"auth__footer-text text text_type_main-default\">\n        Вы - новый пользователь? <Link className=\"auth__link\" to=\"/register\">Зарегестрироваться</Link>\n      </p>\n      <p className=\"auth__footer-text text text_type_main-default\">\n        Забыли пароль? <Link className=\"auth__link\" to=\"/forgot-password\">Восстановить пароль</Link>\n      </p>\n    </section>\n  );\n}\n\nexport default LoginPage;\n","import React, {ChangeEventHandler, useState} from 'react';\nimport {Input, PasswordInput, Button} from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport {Link, Redirect} from \"react-router-dom\";\nimport {baseUrl, registerEndpoint} from \"../../utils/constants\";\nimport {actions} from \"../../services/reducers/auth\";\nimport {requestData} from \"../../services/api\";\nimport {useDispatch, useSelector} from \"../../utils/hooks\";\n\nfunction RegisterPage() {\n  const [name, setName] = useState('');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const isAuth = useSelector((store) => store.auth.isAuth);\n\n\n  const {registerError, registerRequest, registerSuccess} = actions;\n  const dispatch = useDispatch();\n  const onChangeEmail: ChangeEventHandler<HTMLInputElement> = (e) => {\n    setEmail(e.target.value)\n  }\n  const onChangePassword: ChangeEventHandler<HTMLInputElement> = (e) => {\n    setPassword(e.target.value)\n  }\n  const onChangeName: ChangeEventHandler<HTMLInputElement> = (e) => {\n    setName(e.target.value)\n  }\n  const onSubmit: React.FormEventHandler = async (e) => {\n    e.preventDefault();\n    const body = {\n      email,\n      password,\n      name\n    };\n    await dispatch(requestData({\n      method: \"POST\",\n      url: baseUrl + registerEndpoint,\n      body: body,\n      successAction: registerSuccess,\n      requestAction: registerRequest,\n      errorAction: registerError,\n      setCookie: true\n    }));\n\n  }\n  if (isAuth) {\n    return (\n      <Redirect to=\"/\"/>\n    );\n  }\n  return (\n    <section className=\"auth__section\">\n      <form className=\"auth__form\" onSubmit={onSubmit}>\n        <h1 className=\"auth__title text text_type_main-medium\">Регистрация</h1>\n        <Input\n          type={'text'}\n          placeholder={'Имя'}\n          onChange={onChangeName}\n          value={name}\n          error={false}\n          errorText={'Ошибка'}\n          size={'default'}\n        />\n        <Input\n          type={'email'}\n          placeholder={'E-mail'}\n          onChange={onChangeEmail}\n          value={email}\n          error={false}\n          errorText={'Ошибка'}\n          size={'default'}\n        />\n        <PasswordInput\n          onChange={onChangePassword}\n          value={password}\n          name={'password'}\n        />\n        <Button type=\"primary\" size=\"medium\">\n          Зарегестрироваться\n        </Button>\n      </form>\n      <p className=\"auth__footer-text text text_type_main-default\">\n        Уже зарегестрированы? <Link className=\"auth__link\" to=\"/login\">Войти</Link>\n      </p>\n    </section>\n  );\n}\n\nexport default RegisterPage;\n","import React, {SyntheticEvent, useState} from 'react';\nimport {Input, Button} from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport {Link, Redirect} from \"react-router-dom\";\nimport {baseUrl, forgotPasswordEndpoint} from \"../../utils/constants\";\nimport {forgotPasswordRequest} from \"../../services/api\";\n\nfunction ForgotPasswordPage() {\n  const [email, setEmail] = useState('');\n  const [requestReceived, setRequestReceived] = useState(false);\n  const onChangeEmail = (event: { target: HTMLInputElement }) => {\n    setEmail(event.target.value);\n  }\n\n  const onSubmit = async (e: SyntheticEvent) => {\n    e.preventDefault();\n    const result = await forgotPasswordRequest(baseUrl + forgotPasswordEndpoint, email);\n    setRequestReceived(result);\n  };\n  if (requestReceived) {\n    return (\n      <Redirect to=\"reset-password\"/>\n    )\n  }\n\n  return (\n    <section className=\"auth__section\" onSubmit={onSubmit}>\n      <form className=\"auth__form\">\n        <h1 className=\"auth__title text text_type_main-medium\">Восстановление пароля</h1>\n        <Input\n          type={'email'}\n          placeholder={'Укажите e-mail'}\n          onChange={onChangeEmail}\n          value={email}\n          error={false}\n          errorText={'Ошибка'}\n          size={'default'}\n        />\n        <Button type=\"primary\" size=\"medium\">\n          Восстановить\n        </Button>\n      </form>\n      <p className=\"auth__footer-text text text_type_main-default\">\n        Вспомнили пароль? <Link className=\"auth__link\" to=\"/login\">Войти</Link>\n      </p>\n    </section>\n  );\n}\n\nexport default ForgotPasswordPage;\n","import React, {ChangeEventHandler, useState} from 'react';\nimport {Input, Button} from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport {Link, Redirect} from \"react-router-dom\";\nimport {resetPasswordRequest} from \"../../services/api\";\nimport {baseUrl, resetPasswordEndpoint} from \"../../utils/constants\";\n\n\nconst ShowIconString: \"ShowIcon\" = \"ShowIcon\";\nconst HideIconString: \"HideIcon\" = \"HideIcon\";\n\nfunction ResetPasswordPage() {\n  const [newPassword, setNewPassword] = useState('');\n  const [code, setCode] = useState('');\n  const [currentIcon, setCurrentIcon] = useState<\"ShowIcon\" | \"HideIcon\">(ShowIconString);\n  const [changeSuccess, setChangeSuccess] = useState(false);\n  const onChangePassword: ChangeEventHandler<HTMLInputElement> = (e) => {\n    setNewPassword(e.target.value)\n  }\n  const onChangeCode: ChangeEventHandler<HTMLInputElement> = (e) => {\n    setCode(e.target.value)\n  }\n\n  const onSubmit: React.FormEventHandler = async (e) => {\n    e.preventDefault();\n    const result = await resetPasswordRequest(baseUrl + resetPasswordEndpoint, {\n      password: newPassword,\n      token: code\n    });\n    setChangeSuccess(result);\n  }\n\n  const toggleIcon = () => {\n    setCurrentIcon(currentIcon === ShowIconString ? HideIconString : ShowIconString);\n\n  }\n  if (changeSuccess) {\n    return (\n      <Redirect to=\"/login\"/>\n    )\n  }\n  return (\n    <section className=\"auth__section\">\n      <form className=\"auth__form\" onSubmit={onSubmit}>\n        <h1 className=\"auth__title text text_type_main-medium\">Восстановление пароля</h1>\n        <Input\n          type={currentIcon === ShowIconString ? 'text' : 'password'}\n          placeholder={'Введите новый пароль'}\n          onChange={onChangePassword}\n          icon={currentIcon}\n          value={newPassword}\n          name={'name'}\n          error={false}\n          onIconClick={toggleIcon}\n          errorText={'Ошибка'}\n          size={'default'}\n        />\n        <Input\n          type={'text'}\n          placeholder={'Введите код из письма'}\n          onChange={onChangeCode}\n          value={code}\n          error={false}\n          errorText={'Ошибка'}\n          size={'default'}\n        />\n        <Button type=\"primary\" size=\"medium\">\n          Сохранить\n        </Button>\n      </form>\n      <p className=\"auth__footer-text text text_type_main-default\">\n        Вспомнили пароль? <Link className=\"auth__link\" to=\"/login\">Войти</Link>\n      </p>\n    </section>\n  );\n}\n\nexport default ResetPasswordPage;\n","import React, {useEffect} from \"react\";\nimport {Redirect, Route, RouteProps} from \"react-router-dom\";\n\nimport useInit from \"../../services/useInit\";\nimport Loader from \"../../components/loader/loader\";\n\nconst ProtectedRoute: React.FC<RouteProps> = ({children, path, exact}) => {\n  const {init, isInitLoaded, canEnter} = useInit();\n\n  useEffect(() => {\n    init(\"vsNotAuth\");\n  }, [init]);\n\n  if (!isInitLoaded) {\n    return (\n      <Loader type=\"primary\"/>\n    );\n  }\n\n  return (\n    <Route\n      path={path}\n      exact={exact}\n      render={({location}) =>\n        (canEnter) ? (\n          <>\n            {children}\n          </>\n        ) : (\n          <Redirect\n            to={{\n              pathname: '/login',\n              state: {from: location}\n            }}\n          />\n        )\n      }\n    />\n\n\n  );\n}\n\nexport default ProtectedRoute;\n","import React, {ChangeEvent, FormEventHandler, SyntheticEvent, useCallback, useEffect, useState} from \"react\";\nimport {Button, Input, PasswordInput} from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport {actions} from \"../../services/reducers/auth\";\nimport {getUser, updateUser} from \"../../services/api\";\nimport {baseUrl, getUserdataEndpoint} from \"../../utils/constants\";\nimport {validateEmail} from \"../../utils/utils\";\nimport styles from \"./edit-profile.module.css\";\nimport {useDispatch, useSelector} from \"../../utils/hooks\";\n\nfunction EditProfile() {\n  const dispatch = useDispatch();\n  const {setUserName, setUserEmail} = actions;\n\n  function isCurrentStateEqualToInitial() {\n    return !(initialState.name !== name || initialState.email !== email || initialState.password !== password);\n\n  }\n\n  const {nameInStore, emailInStore} = useSelector((store) => ({\n    nameInStore: store.auth.user.name,\n    emailInStore: store.auth.user.email\n  }))\n  const [initDone, setInitDone] = useState(false);\n  const [name, setName] = useState(nameInStore);\n  const [email, setEmail] = useState(emailInStore);\n  const [password, setPassword] = useState('');\n  const [nameError, setNameError] = useState(false);\n  const [emailError, setEmailError] = useState(false);\n  const initialState = {\n    name: \"\",\n    email: \"\",\n    password: \"\"\n  };\n  const onNameChange = (e: ChangeEvent<HTMLInputElement>) => {\n    const newName = e.target.value;\n    setName(newName);\n    if (newName.trim().length < 3) {\n      setNameError(true);\n    } else if (nameError) {\n      setNameError(false);\n    }\n  }\n  const onEmailChange = (e: ChangeEvent<HTMLInputElement>) => {\n    const newEmail = e.target.value;\n    setEmail(newEmail);\n    if (!validateEmail(newEmail)) {\n      setEmailError(true);\n    } else if (nameError) {\n      setEmailError(false);\n    }\n  }\n  const onPasswordChange = (e: ChangeEvent<HTMLInputElement>) => {\n    setPassword(e.target.value);\n  }\n\n  const onSubmit: FormEventHandler<HTMLFormElement> = (e) => {\n    e.preventDefault();\n  }\n  const init: () => void = useCallback(async () => {\n    await dispatch(getUser(baseUrl + getUserdataEndpoint, setUserName, setUserEmail));\n    setInitDone(true);\n  }, [dispatch, setUserName, setUserEmail]);\n\n  useEffect(() => {\n    init()\n  }, [init]);\n  useEffect(() => {\n    setName(nameInStore);\n    setEmail(emailInStore);\n  }, [nameInStore, emailInStore]);\n  if (!initDone) {\n    return null;\n  }\n  const onReset = (e: SyntheticEvent) => {\n    e.preventDefault();\n    setName(nameInStore);\n    setEmail(emailInStore);\n    setPassword(\"\");\n\n  }\n  const onSave = (e: SyntheticEvent) => {\n    e.preventDefault();\n    dispatch(updateUser(\n      baseUrl + getUserdataEndpoint,\n      {\n        name,\n        email,\n        password\n      },\n      setUserName,\n      setUserEmail\n    ));\n\n  }\n\n  return (\n    <section className={\"mt-20\"}>\n      <form onSubmit={onSubmit}>\n        <ul>\n          <li>\n            <Input\n              type={'text'}\n              placeholder={'Имя'}\n              onChange={onNameChange}\n              icon={'EditIcon'}\n              value={name}\n              name={'name'}\n              error={nameError}\n              errorText={'Имя должно быть от Трех символов'}\n              size={'default'}\n            />\n          </li>\n          <li className='mt-6 mb-6'>\n            <Input\n              type={'text'}\n              placeholder={'Логин'}\n              onChange={onEmailChange}\n              icon={'EditIcon'}\n              value={email}\n              name={'email'}\n              error={emailError}\n              errorText={'Введите корректный email'}\n              size={'default'}\n            />\n          </li>\n          <li>\n            <PasswordInput\n              onChange={onPasswordChange}\n              value={password}\n              name={'password'}\n            />\n          </li>\n        </ul>\n        {!isCurrentStateEqualToInitial() && (\n          <div className={styles.buttonsWrapper + \" mt-6\"}>\n            <Button type=\"secondary\" size=\"medium\" onClick={onReset}>\n              Отмена\n            </Button>\n            <Button type=\"primary\" size=\"medium\" onClick={onSave}>\n              Сохранить\n            </Button>\n          </div>\n        )}\n      </form>\n    </section>\n  )\n}\n\nexport default EditProfile;\n","import React from \"react\";\nimport styles from \"./profile-orders.module.css\";\nimport {useWSConnect} from \"../../utils/hooks\";\nimport {getWsUserUrl} from \"../../utils/utils\";\nimport OrderFeedCommonHistory from \"../../components/order-feed-common-history/order-feed-common-history\";\n\nfunction ProfileOrders() {\n  const messages = useWSConnect(getWsUserUrl(), \"user\");\n\n  return (\n    <div className={styles.wrapper}>\n      {messages.length !== 0 && (\n        <OrderFeedCommonHistory lastMessage={messages[messages.length - 1]} isPrivateHistory/>\n      )}\n    </div>\n  );\n}\n\n\nexport default ProfileOrders;\n","import React from \"react\";\nimport {NavLink, Route, Switch, useRouteMatch} from \"react-router-dom\";\nimport styles from \"./profile-page.module.css\";\nimport EditProfile from \"./edit-profile\";\nimport ProfileOrders from \"./profile-orders\";\n\nfunction ProfilePage() {\n  let match: {path: string} = useRouteMatch();\n  return (\n    <div className={styles.container}>\n      <aside className={styles.aside}>\n        <nav>\n          <ul>\n            <li>\n              <NavLink\n                to=\"/profile\"\n                className={styles.navItem + \" text text_type_main-medium\"}\n                activeClassName={styles.activeNavItem}\n                exact\n              >\n                Профиль\n              </NavLink>\n            </li>\n            <li>\n              <NavLink\n                to=\"/profile/orders\"\n                className={styles.navItem + \" text text_type_main-medium\"}\n                activeClassName={styles.activeNavItem}\n\n              >\n                История заказов\n              </NavLink>\n            </li>\n            <li>\n              <NavLink\n                to=\"/logout\"\n                className={styles.navItem + \" text text_type_main-medium\"}\n                activeClassName={styles.activeNavItem}\n                exact\n              >\n                Выход\n              </NavLink>\n            </li>\n          </ul>\n        </nav>\n        <p className={styles.text + \" text text_type_main-default\"}>В этом разделе вы можете\n          изменить свои персональные данные</p>\n      </aside>\n      <Switch>\n        <Route path={`${match.path}/orders`} component={ProfileOrders}/>\n        <Route path={`${match.path}`} component={EditProfile} exact/>\n      </Switch>\n\n    </div>\n  );\n}\n\nexport default ProfilePage;\n","import React, {useCallback, useEffect, useState} from \"react\";\nimport {Redirect} from \"react-router-dom\";\nimport Cookies from 'js-cookie';\nimport {logoutUser} from \"../../services/api\";\nimport {baseUrl, logoutEndpoint} from \"../../utils/constants\";\nimport {actions} from \"../../services/reducers/auth\";\nimport {setCartToInitial} from \"../../services/actions/cart\";\nimport {useDispatch} from \"../../utils/hooks\";\n\nfunction Logout() {\n  const dispatch = useDispatch();\n  const {logout} = actions;\n  const [logoutDone, setLogoutDone] = useState(false);\n\n  const init = useCallback(async function () {\n    await logoutUser(baseUrl + logoutEndpoint);\n    Cookies.set(\"accessToken\", \"\");\n    Cookies.set(\"refreshToken\", \"\");\n\n    await dispatch(logout());\n    dispatch(setCartToInitial());\n    setLogoutDone(true);\n  }, [logout, dispatch]);\n  useEffect(() => {\n    init();\n  }, [init])\n  if (!logoutDone) {\n    return null;\n  }\n  return (\n    <Redirect to=\"login\"/>\n  )\n}\n\nexport default Logout;\n","import React from \"react\";\n\nimport styles from \"./ingredient-details.module.css\";\nimport {IIngredient} from \"../../utils/types\";\nimport {useSelector} from \"../../utils/hooks\";\nimport {useLocation, useParams} from \"react-router-dom\";\nimport {ingredientModalHeader} from \"../../utils/constants\";\nimport NotFound404 from \"../../pages/not-found-404/not-found-404\";\nimport Loader from \"../loader/loader\";\n\nexport default function IngredientDetails() {\n  const params: { ingredientId: string } = useParams();\n  const location = useLocation();\n  const {ingredientId} = params;\n\n  const ingredientsData = useSelector((store) => store.cart.ingredientsData);\n  const itemData: IIngredient = ingredientsData?.find(item => item._id === ingredientId)!;\n  if (ingredientsData && !itemData) {\n    return <NotFound404 />\n  }\n  return itemData ? (\n    <div className={!location.state ? \"mt-30\": undefined}>\n      <h1 className={styles.title + \" white text text_type_main-large\"}>{ingredientModalHeader}</h1>\n      <div className={styles.wrapper}>\n        <img className={styles.image} src={itemData.image_large} alt=\"\"/>\n        <p className={styles.name + \" white text text_type_main-medium mt-4 mb-8\"}>{itemData.name}</p>\n\n        <div className={styles.list}>\n          <div className={styles.item}>\n            <p className={styles.text + \" dark-gray text text_type_main-default\"}>Калории,ккал</p>\n            <p className={styles.text + \" dark-gray text text_type_main-default mt-2\"}>{itemData.calories}</p>\n          </div>\n          <div>\n            <p className={styles.text + \" dark-gray text text_type_main-default\"}>Белки, г</p>\n            <p className={styles.text + \" dark-gray text text_type_main-default mt-2\"}>{itemData.proteins}</p>\n          </div>\n          <div>\n            <p className={styles.text + \" dark-gray text text_type_main-default\"}>Жиры, г</p>\n            <p className={styles.text + \" dark-gray text text_type_main-default mt-2\"}>{itemData.fat}</p>\n          </div>\n          <div>\n            <p className={styles.text + \" dark-gray text text_type_main-default\"}>Углеводы, г</p>\n            <p className={styles.text + \" dark-gray text text_type_main-default mt-2\"}>{itemData.carbohydrates}</p>\n          </div>\n        </div>\n\n      </div>\n    </div>\n  ) : (\n    <Loader type={\"primary\"} />\n  );\n}\n","import React from \"react\";\n\nimport styles from \"./modal-overlay.module.css\";\n\nconst ModalOverlay: React.FC<{onClose: () => void}> = ({onClose}) => {\n  return (\n    <div onClick={onClose} className={styles.overlay}/>\n  );\n}\nexport default ModalOverlay;\n","import React, {ReactNode, useEffect} from \"react\";\nimport ReactDOM from \"react-dom\";\nimport {CloseIcon} from \"@ya.praktikum/react-developer-burger-ui-components\";\n\nimport styles from \"./modal.module.css\";\nimport ModalOverlay from \"../modal-overlay/modal-overlay\";\nimport {useDispatch} from \"../../utils/hooks\";\n\nconst modalRoot = document.getElementById(\"react-modals\") as HTMLElement;\n\nexport default function Modal(props: {\n  children: ReactNode;\n  header?: string;\n  isOrderModal?: boolean;\n  onClose: () => void;\n}) {\n  const {children, header, onClose} = props;\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    const escapeHandler = (event: KeyboardEvent) => {\n      if (event.code === \"Escape\") {\n        onClose();\n      }\n    };\n    document.addEventListener(\"keydown\", escapeHandler);\n    return () => document.removeEventListener(\"keydown\", escapeHandler);\n  }, [dispatch, onClose]);\n  return ReactDOM.createPortal(\n    (\n      <div className={styles.wrapper}>\n        <section className={styles.modal}>\n          <div className={styles.header}>\n            <h2 className={styles.text + \" white text text_type_main-large\"}>{header}</h2>\n            <div className={styles.close}>\n              <CloseIcon onClick={onClose} type=\"primary\"/>\n            </div>\n          </div>\n          {children}\n        </section>\n        <ModalOverlay onClose={onClose}/>\n      </div>\n    )\n    ,\n    modalRoot\n  );\n}\n","export default __webpack_public_path__ + \"static/media/done.cc5a59a7.gif\";","import React, {useEffect, useMemo} from \"react\";\n\nimport styles from \"./order-details.module.css\";\nimport gifPath from \"../../images/done.gif\";\nimport {postOrder} from \"../../services/actions/cart\";\nimport {baseUrl} from \"../../utils/constants\";\nimport {useDispatch, useSelector} from \"../../utils/hooks\";\nimport {calcOrderNum} from \"../../utils/utils\";\n\n\n\nexport default function OrderDetails() {\n  const orderNum = useSelector((store) => store.cart.order.number);\n  const cart = useSelector((store) => store.cart.constructorData);\n  const isOrderRequesting = useSelector(store => store.cart.postOrder.isRequest);\n  const dispatch = useDispatch();\n\n  const cartIDs = useMemo(() => cart.map(item => item._id), [cart]);\n\n\n  const formattedOrderNum = calcOrderNum(orderNum);\n  useEffect(() => {\n      const fetchData = {\n        ingredients: cartIDs,\n      };\n      dispatch(postOrder(baseUrl + \"orders\", fetchData, cartIDs));\n  }, [dispatch, cartIDs]);\n\n  return (\n        <section className={styles.section}>\n          <p style={{height: 120}} className={\"white text text_type_digits-large mt-4 mb-8\"}>{\n            !isOrderRequesting && formattedOrderNum !== \"000000\" ? formattedOrderNum : \"\"\n          }</p>\n          <p className=\"white text text_type_main-medium\">\n          идентификатор заказа\n          </p>\n          <img className=\"mt-15 mb-15\" src={gifPath} alt=\"done\"/>\n          <p className=\"white text text_type_main-default\">\n          Ваш заказ начали готовить\n          </p>\n          <p className=\"dark-gray text text_type_main-default mt-2 mb-20\">\n          Дождитесь готовности на орбитальной станции\n          </p>\n        </section>\n  );\n}\n","import React from 'react';\nimport {Route, Switch, useHistory, useLocation} from \"react-router-dom\";\nimport Main from \"../../pages/main/main\";\nimport OrderFeedPage from \"../../pages/order-feed-page/order-feed-page\";\nimport OrderIngredientsDetails from \"../order-ingredients-details/order-ingredients-details\";\nimport ProtectedFromAuthenticated from \"../../pages/protected-from-authenticated/protected-from-authenticated\";\nimport LoginPage from \"../../pages/login-page/login-page\";\nimport RegisterPage from \"../../pages/register-page/register-page\";\nimport ForgotPasswordPage from \"../../pages/forgot-password-page/forgot-password-page\";\nimport ResetPasswordPage from \"../../pages/reset-password-page/reset-password-page\";\nimport ProtectedRoute from \"../../pages/protected-route/protected-route\";\nimport ProfilePage from \"../../pages/profile-page/profile-page\";\nimport Logout from \"../../pages/logout/logout\";\nimport IngredientDetails from \"../ingredient-details/ingredient-details\";\nimport NotFound404 from \"../../pages/not-found-404/not-found-404\";\nimport Modal from \"../modal/modal\";\nimport OrderDetails from \"../order-details/order-details\";\nimport {closeModal} from \"../../services/actions/modal\";\nimport {clearCart, clearOrder} from \"../../services/actions/cart\";\nimport {useDispatch, useSelector} from \"../../utils/hooks\";\nimport {ILocation} from \"../../utils/types\";\n\n\nconst Routes = () => {\n  const dispatch = useDispatch();\n\n  const history = useHistory();\n  const location = useLocation<ILocation>();\n  let background = location.state && location.state.background;\n\n  const isModalVisible = useSelector((store) => store.modal.isOrderModalVisible);\n  const closeWithGoBack = () => {\n    dispatch(closeModal());\n    history.goBack();\n  }\n  const closeAndClearCart = () => {\n    dispatch(closeModal());\n    dispatch(clearCart());\n    dispatch(clearOrder());\n  }\n  return (\n    <>\n      <Switch location={background || location}>\n        <Route path=\"/\" component={Main} exact/>\n        <Route path=\"/feed\" component={OrderFeedPage} exact/>\n        <Route path=\"/feed/:id\" component={OrderIngredientsDetails} exact/>\n        <ProtectedFromAuthenticated path=\"/login\" exact>\n          <LoginPage />\n        </ProtectedFromAuthenticated>\n        <ProtectedFromAuthenticated path=\"/register\" exact>\n          <RegisterPage />\n        </ProtectedFromAuthenticated>\n        <ProtectedFromAuthenticated path=\"/forgot-password\" exact>\n          <ForgotPasswordPage />\n        </ProtectedFromAuthenticated>\n        <ProtectedFromAuthenticated path=\"/reset-password\" exact>\n          <ResetPasswordPage />\n        </ProtectedFromAuthenticated>\n        <ProtectedRoute path=\"/profile/orders/:id\" exact>\n          <OrderIngredientsDetails />\n        </ProtectedRoute>\n        <ProtectedRoute path=\"/profile\" exact={false}>\n          <ProfilePage />\n        </ProtectedRoute>\n        <Route path=\"/logout\" component={Logout} exact/>\n        <Route path=\"/ingredients/:ingredientId\" component={IngredientDetails} exact/>\n        <Route path=\"*\" component={NotFound404}/>\n      </Switch>\n      {background && <Route path=\"/ingredients/:ingredientId\" children={\n        <Modal onClose={closeWithGoBack}>\n          <IngredientDetails />\n        </Modal>\n      } />}\n      {background && <Route path=\"/feed/:id\" children={\n        <Modal onClose={closeWithGoBack}>\n          <OrderIngredientsDetails />\n        </Modal>\n      } />}\n      {background && <Route path=\"/profile/orders/:id\" children={\n        <Modal onClose={closeWithGoBack}>\n          <OrderIngredientsDetails />\n        </Modal>\n      } />}\n      {isModalVisible && (\n        <Modal isOrderModal onClose={closeAndClearCart}>\n          <OrderDetails/>\n        </Modal>\n      )}\n      {/*<Route path={`${match.path}/:id`} component={OrderIngredientsDetails}/>*/}\n\n    </>\n  );\n};\n\nexport default Routes;\n","import React, {useEffect} from 'react';\n\nimport AppHeader from \"../app-header/app-header\";\nimport {getIngredients} from \"../../services/actions/cart\";\nimport {useDispatch} from \"../../utils/hooks\";\nimport {baseUrl, ingredientsEndpoint} from \"../../utils/constants\";\nimport Routes from \"../routes/routes\";\n\n\nfunction App() {\n  const dispatch = useDispatch();\n  useEffect(() => {\n    dispatch(getIngredients(baseUrl + ingredientsEndpoint));\n  }, [dispatch]);\n  return (\n    <div>\n      <AppHeader/>\n      <Routes />\n    </div>\n  );\n}\n\nexport default App;\n","import {\n  ADD_CONTAINER_ITEM, CLEAR_CART, CLEAR_ORDER,\n  GET_INGREDIENTS_ERROR,\n  GET_INGREDIENTS_REQUEST,\n  GET_INGREDIENTS_SUCCESS,\n  MOVE_CART_ITEM_TO_INDEX, POST_ORDER_ERROR, POST_ORDER_REQUEST, POST_ORDER_SUCCESS,\n  REMOVE_CONTAINER_ITEM,\n  REPLACE_CART_INGREDIENTS, SET_CART_STATE_TO_INITIAL,\n  SET_CONTAINER_BUN,\n  SET_ORDER,\n} from '../actionTypes/cart';\nimport {IHashIngredient, IIngredient} from \"../../utils/types\";\nimport {TCartActions} from \"../actions/cart\";\n\nexport type TCartStore = {\n  ingredientsData: null | Readonly<IIngredient[]>;\n  constructorData: IHashIngredient[];\n  getIngredients: {\n    isRequest: boolean;\n    isSuccess: boolean;\n    isError: boolean;\n  };\n  postOrder: {\n    isRequest: boolean;\n    isSuccess?: boolean;\n    isError?: boolean;\n  };\n  order: {\n    name: string;\n    number: number;\n    cartSum: number;\n    cartIDs: Readonly<string[]>;\n  };\n}\n\nconst initialState: TCartStore = {\n  ingredientsData: null,\n  constructorData: [],\n  getIngredients: {\n    isRequest: false,\n    isSuccess: false,\n    isError: false,\n  },\n  postOrder: {\n    isRequest: false,\n    isSuccess: false,\n    isError: false,\n  },\n  order: {\n    name: \"\",\n    number: 0,\n    cartSum: 0,\n    cartIDs: []\n  }\n};\n// type CartActionsType = {\n//   type: string;\n//   payload?: {name: string; order: {number: number}; success: boolean};\n//   ingredients?: IIngredient[];\n//   cartIDs?: string[];\n//   name?: string;\n//   number?: number;\n//   cartSum?: number;\n//   id?: string;\n//   hash?: string;\n//   hashTop?: string;\n//   hashBottom?: string;\n//   indexFrom?: number;\n//   indexAt?: number;\n// }\n\nexport const cartReducer = (state = initialState, action: TCartActions): TCartStore => {\n  switch (action.type) {\n    case SET_ORDER: {\n      return {\n        ...state,\n        order: {\n          ...state.order,\n          number: action.number,\n          cartSum: action.cartSum,\n          cartIDs: action.cartIDs,\n          name: action.name\n        }\n      }\n    }\n    case CLEAR_ORDER: {\n      return {\n        ...state,\n        order: {\n          name: \"\",\n          number: 0,\n          cartSum: 0,\n          cartIDs: []\n        }\n      }\n    }\n    case CLEAR_CART: {\n      return {\n        ...state,\n        constructorData: []\n      }\n    }\n    case GET_INGREDIENTS_REQUEST: {\n      return {\n        ...state,\n        getIngredients: {\n          ...state.getIngredients,\n          isRequest: true,\n        }\n      }\n    }\n    case GET_INGREDIENTS_SUCCESS: {\n      return {\n        ...state,\n        getIngredients: {\n          ...state.getIngredients,\n          isRequest: false,\n          isSuccess: true,\n          isError: false\n        },\n        ingredientsData: action.ingredients,\n      };\n    }\n\n    case GET_INGREDIENTS_ERROR: {\n      return {\n        ...state,\n        getIngredients: {\n          ...state.getIngredients,\n          isRequest: false,\n          isSuccess: false,\n          isError: true\n        }\n      }\n    }\n    case POST_ORDER_REQUEST: {\n      return {\n        ...state,\n        postOrder: {\n          ...state.postOrder,\n          isRequest: true,\n          isError: false,\n          isSuccess: false\n        }\n      }\n    }\n    case POST_ORDER_SUCCESS: {\n      const name = action.payload?.name;\n      const number = action.payload?.order.number;\n      const cartIDs = action.cartIDs;\n      const cartSum = cartIDs?.reduce((acc: number, next: string) => state.ingredientsData?.find((item: IIngredient) => item._id === next)!.price! + acc, 0);\n      return {\n        ...state,\n        postOrder: {\n          isRequest: false,\n          isSuccess: true,\n        },\n        order: {\n          ...state.order,\n          name,\n          number,\n          cartSum,\n          cartIDs\n        }\n      };\n    }\n    case POST_ORDER_ERROR: {\n      return {\n        ...state,\n        postOrder: {\n          isRequest: false,\n          isError: true\n        }\n      }\n    }\n    case ADD_CONTAINER_ITEM: {\n      const constructor = state.constructorData;\n      const ingredients = state.ingredientsData;\n      const newItem = ingredients?.find(item => item._id === action.id)!;\n      return {\n        ...state,\n        constructorData: [\n          ...constructor.slice(0, -1),\n          {\n            ...newItem,\n            hash: action.hash\n          },\n          ...constructor.slice(-1)\n        ]\n      }\n    }\n    case SET_CONTAINER_BUN: {\n      const constructor = state.constructorData;\n      const ingredients = state.ingredientsData;\n      const newBun = ingredients?.find(item => item._id === action.id)!;\n      if (constructor[0]?.type === \"bun\") {\n        return {\n          ...state,\n          constructorData: [\n            {\n              ...newBun,\n              hash: action.hashTop\n            },\n            ...constructor.slice(1, -1),\n            {\n              ...newBun,\n              hash: action.hashBottom\n            }\n          ]\n        }\n      } else {\n        return {\n          ...state,\n          constructorData: [\n            {\n              ...newBun,\n              hash: action.hashTop\n            },\n            ...constructor.slice(),\n            {\n              ...newBun,\n              hash: action.hashBottom\n            }\n          ]\n        }\n      }\n    }\n    case REMOVE_CONTAINER_ITEM: {\n      return {\n        ...state,\n        constructorData: state.constructorData.filter(item => item.hash !== action.hash)\n      }\n    }\n    case REPLACE_CART_INGREDIENTS: {\n      //const firstItem = state.constructorData[action.indexFrom]\n      const firstItemIndex = action.indexFrom!;\n      const secondItemIndex = action.indexAt!;\n      const cart = [...state.constructorData];\n      [cart[firstItemIndex], cart[secondItemIndex]] = [cart[secondItemIndex], cart[firstItemIndex]]\n      return {\n        ...state,\n        constructorData: cart\n      }\n    }\n    case MOVE_CART_ITEM_TO_INDEX: {\n      const cart = state.constructorData;\n      const item = cart.find(elem => elem.hash === action.hash)!;\n      const cartWitchDeletedItem = cart.filter(item => item.hash !== action.hash);\n      cartWitchDeletedItem.splice(action.indexAt!, 0, item);\n      return {\n        ...state,\n        constructorData: cartWitchDeletedItem\n      }\n    }\n    case SET_CART_STATE_TO_INITIAL: {\n      return {\n        ingredientsData: null,\n        constructorData: [],\n        getIngredients: {\n          isRequest: false,\n          isSuccess: false,\n          isError: false,\n        },\n        postOrder: {\n          isRequest: false,\n          isSuccess: false,\n          isError: false,\n        },\n        order: {\n          name: \"\",\n          number: 0,\n          cartSum: 0,\n          cartIDs: []\n        },\n      };\n    }\n    default: {\n      return state;\n    }\n  }\n};\n","import {OPEN_INGREDIENT_MODAL, OPEN_ORDER_MODAL, SET_MODAL_INVISIBLE} from \"../actionTypes/modal\";\nimport {IIngredient} from \"../../utils/types\";\nimport {TModalActions} from \"../actions/modal\";\n\nexport type TModalState = {\n    isOrderModalVisible: boolean;\n    isIngredientModalVisible: boolean;\n    currentDetailsItem: null | Readonly<IIngredient>;\n}\nconst initialState: TModalState = {\n    isOrderModalVisible: false,\n    isIngredientModalVisible: false,\n    currentDetailsItem: null\n};\n\nexport const modalReducer = (state = initialState, action: TModalActions): TModalState => {\n    switch (action.type) {\n\n        case (SET_MODAL_INVISIBLE): {\n            return {\n                ...state,\n                ...initialState\n            }\n        }\n        case (OPEN_INGREDIENT_MODAL): {\n            return {\n                ...state,\n                isIngredientModalVisible: true,\n                currentDetailsItem: action.payload\n            }\n        }\n        case (OPEN_ORDER_MODAL): {\n            return {\n                ...state,\n                isOrderModalVisible: true\n            }\n        }\n        default: {\n            return state;\n        }\n    }\n}\n","import {createReducer, PayloadAction} from \"@reduxjs/toolkit\";\nimport {\n  WS_CONNECTION_CLOSED,\n  WS_CONNECTION_ERROR, WS_CONNECTION_START,\n  WS_CONNECTION_SUCCESS,\n  WS_GET_MESSAGE\n} from \"../actionTypes/wsActionTypes\";\nimport {IwsMessage} from \"../../utils/types\";\n\nexport type TSocketType = \"all\" | \"user\" | null;\ntype WebSocketState = {\n  wsConnected: boolean;\n  messages: IwsMessage[];\n  error?: Event;\n  socketType: TSocketType;\n}\n\nconst initialState: WebSocketState = {\n  wsConnected: false,\n  messages: [],\n  socketType: null\n}\n\nexport default createReducer(initialState, {\n  [WS_CONNECTION_START]: (state: WebSocketState) => {\n    state.socketType = null;\n  },\n  [WS_CONNECTION_SUCCESS]: (state: WebSocketState) => {\n    state.error = undefined;\n    state.wsConnected = true;\n  },\n  [WS_CONNECTION_CLOSED]: (state: WebSocketState) => {\n    state.wsConnected = false;\n    state.messages = [];\n    state.socketType = null;\n  },\n  [WS_CONNECTION_ERROR]: (state: WebSocketState, action: PayloadAction<Event>) => {\n    state.error = action.payload;\n    state.wsConnected = false;\n  },\n  [WS_GET_MESSAGE]: (state: WebSocketState, action: PayloadAction<{ data: IwsMessage, type: TSocketType }>) => {\n    state.messages = [action.payload.data];\n    state.socketType = action.payload.type;\n  }\n});\n","import {combineReducers} from \"redux\";\nimport {cartReducer} from \"./cart\";\nimport {modalReducer} from \"./modal\";\nimport authSlice from \"./auth\";\nimport webSocketReducer from \"./webSocketReducer\";\n\nexport const rootReducer = combineReducers({\n    cart: cartReducer,\n    modal: modalReducer,\n    auth: authSlice,\n    ws: webSocketReducer\n});\n\n","import {configureStore} from \"@reduxjs/toolkit\";\nimport { rootReducer } from './';\nimport {socketMiddleware} from \"../middleware/socketMiddleware\";\nimport {wsConnectionClosed, wsConnectionError, wsConnectionSuccess, wsGetMessage} from \"../actions/wsActions\";\nimport {WS_CLOSE_CONNECTION, WS_SEND_MESSAGE} from \"../actionTypes/wsActionTypes\";\n\nconst store = configureStore({\n  reducer: rootReducer,\n  middleware: (getDefaultMiddleware) =>\n    getDefaultMiddleware().concat(socketMiddleware({\n      wsOnOpen: wsConnectionSuccess,\n      wsOnMessage: wsGetMessage,\n      wsOnError: wsConnectionError,\n      wsOnClose: wsConnectionClosed,\n      WSSendMessageType: WS_SEND_MESSAGE,\n      WSCloseConnectionType: WS_CLOSE_CONNECTION\n    })),\n\n})\n\nexport default store;\n","import type {Middleware, MiddlewareAPI} from \"redux\";\nimport {AppDispatch, IwsMessage, RootState} from \"../../utils/types\";\nimport {AppActions} from \"../actions\";\nimport {\n  WS_CLOSE_CONNECTION, WS_CONNECTION_CLOSED, WS_CONNECTION_ERROR,\n  WS_CONNECTION_START,\n  WS_CONNECTION_SUCCESS,\n  WS_SEND_MESSAGE\n} from \"../actionTypes/wsActionTypes\";\nimport {TSocketType} from \"../reducers/webSocketReducer\";\nimport {ActionCreatorWithoutPayload, ActionCreatorWithPayload} from \"@reduxjs/toolkit\";\n\nexport const socketMiddleware = ({\n  wsOnOpen, wsOnMessage, wsOnError, wsOnClose, WSSendMessageType, WSCloseConnectionType\n  }: {\n    wsOnOpen: ActionCreatorWithoutPayload<typeof WS_CONNECTION_SUCCESS>,\n    wsOnMessage: ActionCreatorWithPayload<{data: IwsMessage, type: TSocketType}>,\n    wsOnError: ActionCreatorWithoutPayload<typeof WS_CONNECTION_ERROR>,\n    wsOnClose: ActionCreatorWithoutPayload<typeof WS_CONNECTION_CLOSED>,\n    WSSendMessageType: typeof WS_SEND_MESSAGE,\n    WSCloseConnectionType: typeof WS_CLOSE_CONNECTION\n}): Middleware => ((store: MiddlewareAPI<AppDispatch, RootState>) => {\n  let socket: WebSocket | null = null;\n  let currentType: TSocketType | null = null;\n  return next => (action: AppActions) => {\n    // const {dispatch, getState} = store;\n    const {dispatch} = store;\n    //@ts-ignore\n    const {type, payload} = action;\n    if (type === WS_CONNECTION_START) {\n      socket = new WebSocket(payload.url);\n      currentType = payload.type;\n    }\n    if (socket) {\n      socket.onopen = () => {\n        dispatch(wsOnOpen());\n      }\n      socket.onmessage = (event: MessageEvent) => {\n        const data = JSON.parse(event.data);\n        dispatch(wsOnMessage({data, type: currentType}));\n      }\n      socket.onerror = (event: Event) => {\n        dispatch(wsOnError());\n        socket = null;\n      }\n      socket.onclose = (event: CloseEvent) => {\n        dispatch(wsOnClose());\n        socket = null;\n      }\n      if (type === WSSendMessageType) {\n        socket.send(JSON.stringify(payload));\n      }\n      if (type === WSCloseConnectionType) {\n        socket.close();\n      }\n    }\n\n    next(action);\n  }\n}) as Middleware;\n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {Provider} from 'react-redux';\nimport {BrowserRouter as Router} from 'react-router-dom';\nimport App from './components/app/app';\nimport store from \"./services/reducers/store\";\nimport './index.css';\n\nReactDOM.render(\n  (\n    <Provider store={store}>\n      <React.StrictMode>\n        <Router>\n          <App/>\n        </Router>\n      </React.StrictMode>\n    </Provider>\n  ),\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"order-ingredients-details_wrapper__17P-o\",\"number\":\"order-ingredients-details_number__1DZEC\",\"title\":\"order-ingredients-details_title__jpBtG\",\"status\":\"order-ingredients-details_status__2u8Uh\",\"consist\":\"order-ingredients-details_consist__snngu\",\"data\":\"order-ingredients-details_data__Jv-4K\",\"time\":\"order-ingredients-details_time__2WCos\",\"priceWrapper\":\"order-ingredients-details_priceWrapper__3LzGS\",\"price\":\"order-ingredients-details_price__17JkY\",\"tac\":\"order-ingredients-details_tac__2qXFy\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"order-feed-common-history-item_wrapper__2Irv0\",\"numOrder\":\"order-feed-common-history-item_numOrder__3hxWT\",\"time\":\"order-feed-common-history-item_time__pci3g\",\"title\":\"order-feed-common-history-item_title__1JG0v\",\"imgWrapper\":\"order-feed-common-history-item_imgWrapper__12QAR\",\"priceWrapper\":\"order-feed-common-history-item_priceWrapper___fmsV\",\"price\":\"order-feed-common-history-item_price__5Kl-6\",\"status\":\"order-feed-common-history-item_status__KBx_o\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"navItem\":\"profile-page_navItem__1qHyA\",\"activeNavItem\":\"profile-page_activeNavItem__1r_nq\",\"container\":\"profile-page_container__1KW1P\",\"text\":\"profile-page_text__GHV0r\",\"aside\":\"profile-page_aside__2Wamj\",\"section\":\"profile-page_section__3m7KU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"numsWrapper\":\"order-feed-cooking-numbers_numsWrapper__2KwGq\",\"digit\":\"order-feed-cooking-numbers_digit__36if1\",\"text\":\"order-feed-cooking-numbers_text__3G4ve\",\"ordersWrapper\":\"order-feed-cooking-numbers_ordersWrapper__1SikX\",\"orderDone\":\"order-feed-cooking-numbers_orderDone__17Zj1\",\"orderCooking\":\"order-feed-cooking-numbers_orderCooking__3L8PK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"section\":\"burger-constructor_section__3LLkY\",\"list\":\"burger-constructor_list__2lXaw\",\"footer\":\"burger-constructor_footer__2zD0O\",\"cart\":\"burger-constructor_cart__36NRg\",\"wrapper\":\"burger-constructor_wrapper__3y1z5\",\"placeholder\":\"burger-constructor_placeholder__11mNA\",\"placeholderWrapper\":\"burger-constructor_placeholderWrapper__3Ht9s\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"app-header_wrapper__ECTu6\",\"header\":\"app-header_header__1iHLW\",\"list\":\"app-header_list__q5yDi\",\"logo\":\"app-header_logo__zVEfY\",\"nav\":\"app-header_nav__1_idE\",\"item\":\"app-header_item__3FWHt\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"section\":\"burger-ingredients_section__JPGCZ\",\"menu\":\"burger-ingredients_menu__3KO37\",\"tab\":\"burger-ingredients_tab__1Ru1Z\",\"grid\":\"burger-ingredients_grid__2lFG1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"modal_wrapper__3cdkq\",\"modal\":\"modal_modal__1DF1f\",\"header\":\"modal_header__2iX3r\",\"text\":\"modal_text__1Kop1\",\"close\":\"modal_close__1Iez6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"img\":\"order-feed-icon-image_img__2_W_J\",\"imageBackground\":\"order-feed-icon-image_imageBackground__3376u\",\"imageWrapper\":\"order-feed-icon-image_imageWrapper__1_WMp\",\"overflowNumber\":\"order-feed-icon-image_overflowNumber__oJ64y\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"nav-item_item__t4kEe\",\"activeNav\":\"nav-item_activeNav__1fr0M\",\"icon\":\"nav-item_icon__2dAdR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"link\":\"ingredients-item_link__2Tjvj\",\"price\":\"ingredients-item_price__1a8FJ\",\"priceWrap\":\"ingredients-item_priceWrap__1lLe1\",\"text\":\"ingredients-item_text__3biLs\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loaderPrimary\":\"loader_loaderPrimary__1zBkA\",\"loaderKF\":\"loader_loaderKF__QTZBh\",\"loaderSecondary\":\"loader_loaderSecondary__pK0oB\",\"loaderWrapper\":\"loader_loaderWrapper__30z-_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"order-feed-page_title__1B55T\",\"container\":\"order-feed-page_container__OUray\",\"content\":\"order-feed-page_content__2E1yS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"order-ingredients-details-item_wrapper__2hpP4\",\"price\":\"order-ingredients-details-item_price__ziXc0\",\"priceWrapper\":\"order-ingredients-details-item_priceWrapper__3y7T6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"constructor-item_item__ycNFA\",\"icon\":\"constructor-item_icon__uAH3g\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"common\":\"order-status_common__10CLa\",\"done\":\"order-status_done__2IqJX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"not-found-404_title__MwGhw\",\"wrapper\":\"not-found-404_wrapper__2cvOE\"};"],"sourceRoot":""}